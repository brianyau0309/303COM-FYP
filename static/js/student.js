!function(e){function t(t){for(var a,o,l=t[0],r=t[1],c=t[2],m=0,d=[];m<l.length;m++)o=l[m],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);for(h&&h(t);d.length;)d.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,l=1;l<s.length;l++){var r=s[l];0!==n[r]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},n={0:0},i=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window.webpackJsonp=window.webpackJsonp||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var h=r;i.push([24,1]),s()}({24:function(e,t,s){e.exports=s(42)},42:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),i=s(21),o=s.n(i),l=s(1),r=s(7);class c extends n.a.Component{constructor(e){super(e),this.logout=this.logout.bind(this)}logout(e){e.preventDefault(),fetch("/logout",{method:"POST"}).then(e=>{e.ok&&e.json().then(e=>{"Success"===e.logout&&(window.location.href=window.location.origin)})})}render(){return n.a.createElement("ul",{id:"nav",className:this.props.nav?"open":"close"},n.a.createElement(l.c,{to:"/courses",onClick:this.props.navToggle},n.a.createElement("li",{className:"nav-items"},n.a.createElement("img",{src:"https://img.icons8.com/dusk/64/000000/course-assign.png"}),n.a.createElement("div",null,"Courses"))),n.a.createElement(l.c,{to:"/questions",onClick:this.props.navToggle},n.a.createElement("li",{className:"nav-items"},n.a.createElement("img",{src:"https://img.icons8.com/dusk/64/000000/why-us-male.png"}),n.a.createElement("div",null,"Questions"))),n.a.createElement(l.c,{to:"/classrooms",onClick:this.props.navToggle},n.a.createElement("li",{className:"nav-items"},n.a.createElement("img",{src:"https://img.icons8.com/dusk/64/000000/class.png"}),n.a.createElement("div",null,"Classrooms"))),n.a.createElement(l.c,{to:"/setting",onClick:this.props.navToggle},n.a.createElement("li",{className:"nav-items"},n.a.createElement("img",{src:"https://img.icons8.com/dusk/64/000000/small-smile.png"}),n.a.createElement("div",null,"Self"))),n.a.createElement(l.c,{to:"/notification",onClick:this.props.navToggle},n.a.createElement("li",{className:"nav-items"},n.a.createElement("img",{src:"https://img.icons8.com/dusk/64/000000/appointment-reminders.png"}),n.a.createElement("div",null,"Notification"))),n.a.createElement("a",{href:"/",onClick:this.logout},n.a.createElement("li",{className:"nav-items"},n.a.createElement("img",{src:"https://img.icons8.com/dusk/64/000000/logout-rounded-left.png"}),n.a.createElement("div",null,"Logout"))))}}class h extends n.a.Component{constructor(e){super(e),this.state={target:0,targetInfo:!1,icon:`${window.location.origin}/static/images/icons/icon-128x128.png`},this.loadUserInfo=this.loadUserInfo.bind(this),this.loadIcon=this.loadIcon.bind(this),this.imgOnError=this.imgOnError.bind(this),this.followToggle=this.followToggle.bind(this)}loadUserInfo(e){this.setState({target:e},()=>{fetch(`/api/user_info?target=${this.state.target}`).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({targetInfo:e.target_info}),this.loadIcon(this.state.target)})})})}loadIcon(e){this.setState({icon:`${window.location.origin}/static/images/user_icons/${e}.png?${(new Date).getTime()}`})}imgOnError(){this.setState({icon:`${window.location.origin}/static/images/icons/icon-128x128.png`})}followToggle(){fetch(`/api/user_follow?target=${this.state.target}`,{method:"POST"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.loadUserInfo(this.state.target)})})}render(){const{targetInfo:e}=this.state;return n.a.createElement("div",{className:"UserInfo"},n.a.createElement("div",{className:"UserInfo-bg",onClick:this.props.openToggle}),e&&n.a.createElement("div",{className:"UserInfo-main"},n.a.createElement("img",{src:this.state.icon,alt:"target icon",onError:this.imgOnError}),n.a.createElement("div",null,e.nickname),n.a.createElement("div",null,"User Id: ",e.user_id),n.a.createElement("div",null,e.user_type," from ",e.school),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("div",null,"Best Answer"),n.a.createElement("div",null,e.best_answer?e.best_answer:0)),n.a.createElement("div",null,n.a.createElement("div",null,"Answer Likes"),n.a.createElement("div",null,e.answer_likes?e.answer_likes:0)),"teacher"===e.user_type&&n.a.createElement("div",null,n.a.createElement("div",null,"Course Average Rate"),n.a.createElement("div",null,e.course_num?e.course_num:0)),"teacher"===e.user_type&&n.a.createElement("div",null,n.a.createElement("div",null,"Followers"),n.a.createElement("div",null,e.follower?e.follower:0)),e.user_id!==this.props.user_id&&"teacher"===e.user_type?e.following?n.a.createElement("div",{onClick:this.followToggle},"Unfollow"):n.a.createElement("div",{onClick:this.followToggle},"Follow"):null)))}}class m extends n.a.Component{constructor(e){super(e),this.btnClick=this.btnClick.bind(this)}componentDidMount(){window.frames[this.props.editor].document.designMode="on",window.frames[this.props.editor].document.execCommand("enableObjectResizing",!1,!1)}btnClick(e){let t=null;"InsertOrderedList"!==e&&"InsertUnorderedList"!==e||(t=1e3*Math.random()),window.frames[this.props.editor].document.execCommand(e,!1,t)}render(){return n.a.createElement("div",{className:"TextEditor"},n.a.createElement("div",{className:"EditorPanel"},n.a.createElement("button",{id:"btnBold",title:"Bold",onClick:()=>this.btnClick("Bold")},n.a.createElement("img",{src:"https://img.icons8.com/metro/26/000000/bold.png"})),n.a.createElement("button",{id:"btnItalic",title:"Italic",onClick:()=>this.btnClick("Italic")},n.a.createElement("img",{src:"https://img.icons8.com/metro/26/000000/italic.png"})),n.a.createElement("button",{id:"btnUnderln",title:"Underline",onClick:()=>this.btnClick("Underline")},n.a.createElement("img",{src:"https://img.icons8.com/metro/26/000000/underline.png"})),n.a.createElement("button",{id:"btnStrike",title:"Strike",onClick:()=>this.btnClick("Strikethrough")},n.a.createElement("img",{src:"https://img.icons8.com/metro/26/000000/strikethrough.png"})),n.a.createElement("button",{id:"btnJLeft",title:"Justisfy left",onClick:()=>this.btnClick("JustifyLeft")},n.a.createElement("img",{src:"https://img.icons8.com/metro/26/000000/align-left.png"})),n.a.createElement("button",{id:"btnJCenter",title:"Justisfy center",onClick:()=>this.btnClick("JustifyCenter")},n.a.createElement("img",{src:"https://img.icons8.com/metro/26/000000/align-center.png"})),n.a.createElement("button",{id:"btnJRight",title:"Justisfy right",onClick:()=>this.btnClick("JustifyRight")},n.a.createElement("img",{src:"https://img.icons8.com/metro/26/000000/align-right.png"})),n.a.createElement("button",{id:"btnOList",title:"Ordered list",onClick:()=>this.btnClick("InsertOrderedList")},n.a.createElement("img",{src:"https://img.icons8.com/metro/26/000000/numbered-list.png"})),n.a.createElement("button",{id:"btnUList",title:"Unorder list",onClick:()=>this.btnClick("InsertUnorderedList")},n.a.createElement("img",{src:"https://img.icons8.com/material-sharp/24/000000/list.png"})),n.a.createElement("button",{id:"btnSup",title:"Superscript",onClick:()=>this.btnClick("Superscript")},n.a.createElement("img",{src:"https://img.icons8.com/ios-glyphs/30/000000/superscript.png"})),n.a.createElement("button",{id:"btnSub",title:"Subscript",onClick:()=>this.btnClick("Subscript")},n.a.createElement("img",{src:"https://img.icons8.com/ios-glyphs/30/000000/subscript.png"}))),n.a.createElement("iframe",{marginwidth:"15",marginheight:"10",name:this.props.editor,id:this.props.editor,onKeyUp:this.counting}))}}class d extends n.a.Component{constructor(e){super(e),this.state={open:!1,editedTitle:"",tags:[]},this.loadCourse=this.loadCourse.bind(this),this.submitEditedCourse=this.submitEditedCourse.bind(this),this.newTag=this.newTag.bind(this),this.popTag=this.popTag.bind(this),this.tagInputOnChange=this.tagInputOnChange.bind(this),this.titleOnChange=this.titleOnChange.bind(this),this.openToggle=this.openToggle.bind(this)}loadCourse(e,t,s){this.setState({editedTitle:e,tags:t}),window.frames.EditCourse.document.body.innerHTML=s}submitEditedCourse(){let e=window.frames.EditCourse.document.body.innerHTML;fetch("/api/course",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({submit_edited_course:{course:this.props.course_id,edited_title:this.state.editedTitle,edited_description:e,edited_tags:this.state.tags}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.props.reload(),this.openToggle()})})}newTag(){if(this.state.tags.length<10){let e=this.state.tags;e.push(""),this.setState({tags:e})}}popTag(e){if(this.state.tags.length>1){let t=this.state.tags;t.splice(e,1),this.setState({tags:t})}}tagInputOnChange(e,t){let s=this.state.tags;s[t]=e,this.setState({tag:s},()=>console.log(this.state.tags))}titleOnChange(e){console.log(e.target.value),this.setState({editedTitle:e.target.value})}openToggle(){this.setState({open:!this.state.open})}render(){return n.a.createElement("div",{className:this.state.open?"EditCourse open":"EditCourse close"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.openToggle}),n.a.createElement("span",null,"Edit Course")),n.a.createElement("input",{type:"text",value:this.state.editedTitle,onChange:this.titleOnChange}),n.a.createElement(m,{editor:"EditCourse"}),n.a.createElement("div",null,"Courses Tags ",n.a.createElement("img",{onClick:this.newTag,src:"https://img.icons8.com/flat_round/64/000000/plus.png"})),n.a.createElement("ul",null,this.state.tags.map((e,t)=>n.a.createElement("li",null,n.a.createElement("input",{type:"text",className:"tag-input",value:e,maxLength:"15",onChange:e=>this.tagInputOnChange(e.target.value,t)}),0!==t?n.a.createElement("img",{src:"https://img.icons8.com/flat_round/64/000000/minus.png",onClick:()=>this.popTag(t)}):null))),n.a.createElement("button",{onClick:this.submitEditedCourse},"Submit Edited Course"))}}class u extends n.a.Component{constructor(e){super(e),this.state={open:!1,filename:"No File"},this.openToggle=this.openToggle.bind(this),this.editLesson=this.editLesson.bind(this)}loadLesson(e,t,s,a){document.querySelector("#edited_lesson_title").value=e,document.querySelector("#edited_lesson_file").value="",document.querySelector("#edited_youtube_link").value=s,document.querySelector("#delete_file_check").checked=!1,window.frames.EditLesson.document.body.innerHTML=a,this.setState({filename:t})}editLesson(){let e=document.querySelector("#edited_lesson_title").value,t=document.querySelector("#edited_lesson_file").files[0],s=null;null!=t&&(s=document.querySelector("#edited_lesson_file").files[0].name.split(".").pop());let a=document.querySelector("#edited_youtube_link").value,n=window.frames.EditLesson.document.body.innerHTML,i=!1;!0===document.querySelector("#delete_file_check").checked&&(i=!0),console.log(i);const o=new FormData;o.append("title",e),["pdf","doc","docx","ppt","pptx"].includes(s)&&o.append("file",t),o.append("delete_file",i),o.append("youtube_link",a),o.append("lesson_detail",n),fetch("/api/lesson?c="+this.props.course_id+"&l="+this.props.lesson_num,{method:"PUT",body:o}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.openToggle(),this.props.reload()})})}openToggle(){this.setState({open:!this.state.open})}render(){return n.a.createElement("div",{className:this.state.open?"EditLesson open":"EditLesson close"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.openToggle}),n.a.createElement("span",null,"Edit Lesson")),n.a.createElement("input",{id:"edited_lesson_title",type:"text",placeholder:"Lesson Title",required:!0,maxLength:"40"}),n.a.createElement("input",{id:"edited_youtube_link",type:"url",placeholder:"Youtube Embed Link"}),n.a.createElement("div",null,this.state.filename),n.a.createElement("input",{id:"edited_lesson_file",type:"file",placeholder:"Lesson File"}),n.a.createElement("label",null,"Delete File",n.a.createElement("input",{id:"delete_file_check",type:"checkbox"})),n.a.createElement(m,{editor:"EditLesson"}),n.a.createElement("button",{style:{display:"block"},className:"submit",onClick:this.editLesson},"Edit"))}}class p extends n.a.Component{constructor(e){super(e),this.state={open:!1,deleteLesson:!1,course_id:"",lesson_num:"",title:"",detail:"",video_link:"",filename:"",last_update:""},this.child=n.a.createRef(),this.editLesson=this.editLesson.bind(this),this.deleteLesson=this.deleteLesson.bind(this),this.openToggle=this.openToggle.bind(this)}loadLesson(e,t){fetch("/api/lesson?c="+e+"&l="+t).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({deleteLesson:!1,course_id:e.lesson.course,lesson_num:e.lesson.lesson_num,title:e.lesson.title,detail:e.lesson.detail,video_link:e.lesson.video_link,filename:e.lesson.filename,last_update:e.lesson.last_update})})})}editLesson(e,t,s,a){this.child.current.loadLesson(e,t,s,a),this.child.current.openToggle()}deleteLesson(){fetch("/api/lesson?c="+this.state.course_id+"&l="+this.state.lesson_num,{method:"DELETE"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({deleteLesson:!0}),this.props.loadLessons()})})}openToggle(){this.setState({open:!this.state.open})}render(){return n.a.createElement("div",{className:this.state.open?"Lesson open":"Lesson close"},this.state.deleteLesson?n.a.createElement("div",{style:{top:"0",left:"0",position:"absolute",width:"100%",height:"100vh",background:"white"}},n.a.createElement("div",null,"Delete Lesson Success!"),n.a.createElement("div",{onClick:this.openToggle},"Back to Course Page")):null,n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.openToggle}),n.a.createElement("span",null,"Lession")),n.a.createElement("div",{className:"Lesson-detail"},n.a.createElement("div",null,this.state.title),null!=this.state.video_link?n.a.createElement("iframe",{width:"560",height:"315",src:this.state.video_link,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}):null,null!=this.state.filename?n.a.createElement("div",null,n.a.createElement("span",null,this.state.filename),n.a.createElement("a",{href:window.location.origin+"/static/files/"+this.state.course_id+"_"+this.state.lesson_num+"."+this.state.filename.split(".").pop(),Download:this.state.filename},"Download")):null,n.a.createElement("div",{className:"lesson_detail",dangerouslySetInnerHTML:{__html:this.state.detail}})),this.props.myCourse?n.a.createElement("div",null,n.a.createElement("div",{onClick:()=>this.editLesson(this.state.title,this.state.filename,this.state.video_link,this.state.detail)},"Edit Lesson"),n.a.createElement("div",{onClick:this.deleteLesson},"Delete Lesson")):null,this.props.myCourse?n.a.createElement(u,{ref:this.child,reload:()=>this.loadLesson(this.state.course_id,this.state.lesson_num),course_id:this.state.course_id,lesson_num:this.state.lesson_num}):null)}}class g extends n.a.Component{constructor(e){super(e),this.state={open:!1},this.openToggle=this.openToggle.bind(this),this.createLesson=this.createLesson.bind(this)}createLesson(){let e=document.querySelector("#lesson_title").value,t=document.querySelector("#lesson_file").files[0],s=null;null!=t&&(s=document.querySelector("#lesson_file").files[0].name.split(".").pop());let a=document.querySelector("#youtube_link").value,n=window.frames.CreateLesson.document.body.innerHTML;const i=new FormData;i.append("title",e),["pdf","doc","docx","ppt","pptx"].includes(s)&&i.append("file",t),i.append("youtube_link",a),i.append("lesson_detail",n),fetch("/api/lesson?c="+this.props.course_id,{method:"POST",body:i}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.props.reload(),this.openToggle()})})}openToggle(){document.querySelector("#lesson_title").value="",document.querySelector("#lesson_file").value="",document.querySelector("#youtube_link").value="",window.frames.CreateLesson.document.body.innerHTML="",this.setState({open:!this.state.open})}render(){return n.a.createElement("div",{className:this.state.open?"CreateLesson open":"CreateLesson close"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.openToggle}),n.a.createElement("span",null,"Create Lesson")),n.a.createElement("input",{id:"lesson_title",type:"text",placeholder:"Lesson Title",required:!0,maxLength:"40"}),n.a.createElement("input",{id:"youtube_link",type:"url",placeholder:"Youtube Embed Link"}),n.a.createElement("input",{id:"lesson_file",type:"file",placeholder:"Lesson File"}),n.a.createElement(m,{editor:"CreateLesson"}),n.a.createElement("button",{style:{display:"block"},className:"submit",onClick:this.createLesson},"Create"))}}class E extends n.a.Component{constructor(e){super(e),this.state={open:!1,editedRate:5},this.loadComment=this.loadComment.bind(this),this.submitEditedComment=this.submitEditedComment.bind(this),this.rating=this.rating.bind(this),this.openToggle=this.openToggle.bind(this)}loadComment(e,t){window.frames.EditComment.document.body.innerHTML=e,this.setState({editedRate:t})}submitEditedComment(){let e=window.frames.EditComment.document.body.innerHTML;fetch("/api/courses_comments",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({submit_edited_comment:{course:this.props.course_id,edited_comment:e,edited_rate:this.state.editedRate}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.props.reload(),this.openToggle()})})}rating(e){this.setState({editedRate:e})}openToggle(){this.setState({open:!this.state.open})}render(){return n.a.createElement("div",{className:this.state.open?"EditComment open":"EditComment close"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.openToggle}),n.a.createElement("span",null,"Edit Comment")),[...Array(5).keys()].map(e=>this.state.editedRate<e+1?n.a.createElement("img",{src:"https://img.icons8.com/color/48/000000/star--v1.png",onClick:()=>this.rating(e+1)}):n.a.createElement("img",{src:"https://img.icons8.com/emoji/48/000000/star-emoji.png",onClick:()=>this.rating(e+1)})),n.a.createElement("span",null,this.state.editedRate),n.a.createElement(m,{editor:"EditComment"}),n.a.createElement("button",{onClick:this.submitEditedComment},"Submit Edited Comment"))}}const _="https://img.icons8.com/emoji/48/000000/star-emoji.png";class C extends n.a.Component{constructor(e){super(e),this.state={open:!1,commentField:!1,deleteCourse:!1,canComment:!1,myCourse:!1,isCollection:!1,course_id:"",title:"",author:"",nickname:"",description:"",commentRate:5,lessons:[],comments:[],tags:[]},this.child=n.a.createRef(),this.child2=n.a.createRef(),this.child3=n.a.createRef(),this.child4=n.a.createRef(),this.checkCanComment=this.checkCanComment.bind(this),this.checkMyCourse=this.checkMyCourse.bind(this),this.checkIsCollection=this.checkIsCollection.bind(this),this.loadCourse=this.loadCourse.bind(this),this.loadLessons=this.loadLessons.bind(this),this.loadComments=this.loadComments.bind(this),this.deleteCourse=this.deleteCourse.bind(this),this.openLesson=this.openLesson.bind(this),this.createLesson=this.createLesson.bind(this),this.collectionToggle=this.collectionToggle.bind(this),this.submitComment=this.submitComment.bind(this),this.editComment=this.editComment.bind(this),this.deleteComment=this.deleteComment.bind(this),this.rating=this.rating.bind(this),this.reloadComments=this.reloadComments.bind(this),this.openToggle=this.openToggle.bind(this),this.commentFieldToggle=this.commentFieldToggle.bind(this)}checkCanComment(e){fetch("/api/courses_comments?cc="+e).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({canComment:e.canComment})})})}checkMyCourse(e){fetch("/api/my_courses?c="+e).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({myCourse:e.myCourse})})})}checkIsCollection(e){fetch("/api/course_collection?c="+e).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({isCollection:e.isCollection})})})}loadCourse(e){fetch("/api/course?c="+e).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({commentField:!1,deleteCourse:!1,course_id:e.course.course_id,title:e.course.title,author:e.course.author,nickname:e.course.nickname,description:e.course.description,tags:e.course.tags,create_date:e.course.create_date,avg_rate:e.course.avg_rate,raters:e.course.raters})})})}loadLessons(e){fetch("/api/lessons?c="+e).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({lessons:e.lessons})})})}loadComments(e){fetch("/api/courses_comments?c="+e).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({comments:e.comments})})})}editCourse(e,t,s){this.child2.current.loadCourse(e,t,s),this.child2.current.openToggle()}deleteCourse(){fetch("/api/course?c="+this.state.course_id,{method:"PATCH"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({deleteCourse:!0}),this.props.loadCourses()})})}openLesson(e,t){this.child4.current.loadLesson(e,t),this.child4.current.openToggle()}createLesson(){this.child3.current.openToggle()}collectionToggle(e,t){fetch("/api/course_collection?c="+e,{method:t}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.checkIsCollection(this.state.course_id),this.props.loadCourses()})})}submitComment(){let e=window.frames.CourseComment.document.body.innerHTML;console.log(e),fetch("/api/courses_comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submit_comment:{course:this.state.course_id,comment:e,rate:this.state.commentRate}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.reloadComments()})})}editComment(e,t){this.child.current.loadComment(e,t),this.child.current.openToggle()}deleteComment(){fetch("/api/courses_comments?c="+this.state.course_id,{method:"DELETE"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.reloadComments()})})}rating(e){this.setState({commentRate:e})}reloadComments(){this.loadCourse(this.state.course_id),this.checkCanComment(this.state.course_id),this.loadComments(this.state.course_id)}openToggle(){this.setState({open:!this.state.open})}commentFieldToggle(){this.setState({commentField:!this.state.commentField,commentRate:5})}render(){return n.a.createElement("div",{className:this.state.open?"Course open":"Course close"},this.state.deleteCourse?n.a.createElement("div",{style:{top:"0",left:"0",position:"absolute",width:"100%",height:"100vh",background:"white"}},n.a.createElement("div",null,"Delete Course Success!"),n.a.createElement("div",{onClick:this.openToggle},"Back to Course Page")):null,n.a.createElement("div",{className:"header sticky-top"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.openToggle}),n.a.createElement("span",null,"Course")),n.a.createElement("div",{className:"course-detail"},n.a.createElement("div",{className:"title"},this.state.title),n.a.createElement("div",{className:"author",onClick:()=>this.props.userInfoToggle(this.state.author)},"Author: ",this.state.nickname),n.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:this.state.description}}),n.a.createElement("div",{className:"tags"},"Tags: ",this.state.tags.map(e=>e+" ")),n.a.createElement("div",{style:{textAlign:"right",padding:"1vh 1vh 0 1vh"}},this.state.create_date&&new Date(this.state.create_date).toISOString().split("T")[0]," ",this.state.create_date&&new Date(this.state.create_date).toISOString().split("T")[1].split(".")[0])),this.state.lessons.length>0?n.a.createElement("div",{className:"lesson-panel"},this.state.lessons.map(e=>n.a.createElement("div",{className:"lesson",onClick:()=>this.openLesson(this.state.course_id,e.lesson_num)},e.title,e.video_link?n.a.createElement("span",{style:{background:"lightskyblue",margin:"0 0.5vh",fontSize:"2vh",padding:"0.5vh",borderRadius:"5px"}},"Video"):null,e.filename?n.a.createElement("span",{style:{background:"lightyellow",margin:"0 0.5vh",fontSize:"2vh",padding:"0.5vh",borderRadius:"5px"}},"File"):null))):null,n.a.createElement("div",{className:"course-btn-panel"},this.state.myCourse?n.a.createElement("div",{className:"create",onClick:this.createLesson},"Create Lesson"):null,this.state.myCourse?n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"edit",onClick:()=>this.editCourse(this.state.title,this.state.tags,this.state.description)},"Edit Course"),n.a.createElement("div",{className:"delete",onClick:this.deleteCourse},"Delete Course")):null,n.a.createElement("div",{className:"rate"},"Course Rate: ",this.state.avg_rate?this.state.avg_rate.toFixed(2):"--","(",this.state.raters?this.state.raters:"--",")"),this.state.isCollection?n.a.createElement("div",{className:"collection remove",onClick:()=>this.collectionToggle(this.state.course_id,"DELETE")},"Remove from Collection"):n.a.createElement("div",{className:"collection add",onClick:()=>this.collectionToggle(this.state.course_id,"POST")},"Add to Collection")),n.a.createElement("div",{className:"comments-header"},"Comments"),this.state.canComment?n.a.createElement("div",{className:"comments-header"},n.a.createElement("div",{onClick:this.commentFieldToggle,style:{cursor:"pointer"}},"I want to comment!"),this.state.commentField?n.a.createElement("div",null,[...Array(5).keys()].map(e=>this.state.commentRate<e+1?n.a.createElement("img",{src:"https://img.icons8.com/color/48/000000/star--v1.png",onClick:()=>this.rating(e+1)}):n.a.createElement("img",{src:_,onClick:()=>this.rating(e+1)})),n.a.createElement("span",null,this.state.commentRate),n.a.createElement(m,{editor:"CourseComment"}),n.a.createElement("button",{onClick:this.submitComment},"Submit")):null):null,this.state.comments.length>0?n.a.createElement("ul",{className:"comment-list"},this.state.comments.map(e=>{if(e.create_by!==this.state.solved_by)return n.a.createElement("li",null,n.a.createElement("div",{onClick:()=>this.props.userInfoToggle(e.create_by)},e.nickname," ",[...Array(5).keys()].map(t=>e.rating<t+1?n.a.createElement("img",{src:"https://img.icons8.com/color/48/000000/star--v1.png"}):n.a.createElement("img",{src:_}))),n.a.createElement("div",{style:{padding:"0 1vh"},dangerouslySetInnerHTML:{__html:e.content}}),n.a.createElement("div",null,new Date(e.create_date).toISOString().split("T")[0]," ",new Date(e.create_date).toISOString().split("T")[1].split(".")[0]),this.props.user_id===e.create_by?n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"edit",onClick:()=>this.editComment(e.content,e.rating)},"Edit"),n.a.createElement("div",{className:"delete",onClick:this.deleteComment},"Delete")):null)})):null,this.state.myCourse?n.a.createElement(d,{ref:this.child2,reload:()=>this.loadCourse(this.state.course_id),course_id:this.state.course_id}):n.a.createElement(E,{ref:this.child,reload:this.reloadComments,course_id:this.state.course_id}),this.state.myCourse?n.a.createElement(g,{ref:this.child3,course_id:this.state.course_id,reload:()=>this.loadLessons(this.state.course_id)}):null,n.a.createElement(p,{ref:this.child4,myCourse:this.state.myCourse,loadLessons:()=>this.loadLessons(this.state.course_id)}))}}class k extends n.a.Component{constructor(e){super(e),this.state={new:[],hot:[],recommand:[],search_mode:!1,search_query:"",search_method:"title",search_result:[]},this.child=n.a.createRef(),this.loadCourses=this.loadCourses.bind(this),this.loadCourseSearch=this.loadCourseSearch.bind(this),this.callCourse=this.callCourse.bind(this),this.inputOnChange=this.inputOnChange.bind(this),this.inputKeyDown=this.inputKeyDown.bind(this),this.methodOnChange=this.methodOnChange.bind(this),this.back=this.back.bind(this)}componentDidMount(){this.loadCourses()}loadCourses(){fetch("/api/courses").then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({new:e.courses.new,hot:e.courses.hot,recommand:e.courses.recommand},()=>console.log(this.state))})})}loadCourseSearch(){fetch("/api/courses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({search_query:this.state.search_query,search_method:this.state.search_method})}).then(e=>{e.ok&&e.json().then(e=>{this.setState({search_result:e.search_result},()=>console.log(this.state)),this.setState({search_mode:!0})})})}callCourse(e){this.child.current.loadCourse(e),this.child.current.loadLessons(e),this.child.current.loadComments(e),this.child.current.checkCanComment(e),this.child.current.checkMyCourse(e),this.child.current.checkIsCollection(e),this.child.current.openToggle()}inputOnChange(e){this.setState({search_query:e.target.value})}inputKeyDown(e){"Enter"===e.key&&this.loadCourseSearch()}methodOnChange(e){console.log(e.target.value),this.setState({search_method:e.target.value})}back(){this.loadCourses(),this.setState({search_mode:!1,search_query:""})}render(){return n.a.createElement("div",{className:"Courses content"},n.a.createElement("div",{className:"search-panel"},n.a.createElement("select",{onChange:this.methodOnChange,value:this.state.search_method},n.a.createElement("option",{value:"title"},"Title"),n.a.createElement("option",{value:"tags"},"Tags"),n.a.createElement("option",{value:"author"},"Author")),n.a.createElement("input",{type:"text",placeholder:"Search Courses Here!",value:this.state.search_query,onChange:this.inputOnChange,onKeyDown:this.inputKeyDown}),n.a.createElement("span",{onClick:this.loadCourseSearch},"Search")),this.state.search_mode?n.a.createElement("div",null,n.a.createElement("h1",{className:"title"},n.a.createElement("img",{src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.back}),"Search Results"),n.a.createElement("ul",{className:"course-list"},this.state.search_result.map(e=>n.a.createElement("li",{onClick:()=>this.callCourse(e.course_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,"Author: ",e.nickname," ",n.a.createElement("span",null,new Date(e.create_date).toISOString().split("T")[0]," ",new Date(e.create_date).toISOString().split("T")[1].split(".")[0])),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}))))):n.a.createElement("div",null,"teacher"===this.props.user_type?n.a.createElement(l.c,{className:"option",to:"/courses/create"},n.a.createElement("div",null,"Create Course")):null,"teacher"===this.props.user_type?n.a.createElement(l.c,{className:"option",to:"/courses/my"},n.a.createElement("div",null,"My Courses")):null,n.a.createElement(l.c,{className:"option",to:"/courses/collection"},n.a.createElement("div",null,"My Collection")),n.a.createElement("h1",{className:"title"},"New"),n.a.createElement("hr",null),n.a.createElement("ul",{className:"course-list"},this.state.new.map(e=>n.a.createElement("li",{onClick:()=>this.callCourse(e.course_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,"Author: ",e.nickname," ",n.a.createElement("span",null,new Date(e.create_date).toISOString().split("T")[0]," ",new Date(e.create_date).toISOString().split("T")[1].split(".")[0])),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})))),n.a.createElement("h1",{className:"title"},"Hotest"),n.a.createElement("hr",null),n.a.createElement("ul",{className:"course-list"},this.state.hot.map(e=>n.a.createElement("li",{onClick:()=>this.callCourse(e.course_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,"Author: ",e.nickname," ",n.a.createElement("span",null,new Date(e.create_date).toISOString().split("T")[0]," ",new Date(e.create_date).toISOString().split("T")[1].split(".")[0])),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})))),n.a.createElement("h1",{className:"title"},"Recommand"),n.a.createElement("hr",null),n.a.createElement("ul",{className:"course-list"},this.state.recommand.map(e=>n.a.createElement("li",{onClick:()=>this.callCourse(e.course_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,"Author: ",e.nickname," ",n.a.createElement("span",null,new Date(e.create_date).toISOString().split("T")[0]," ",new Date(e.create_date).toISOString().split("T")[1].split(".")[0])),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}))))),n.a.createElement(C,{ref:this.child,user_id:this.props.user_id,loadCourses:this.loadCourses,userInfoToggle:this.props.userInfoToggle}))}}class v extends n.a.Component{constructor(e){super(e),this.state={success_page:!1,tags:[""]},this.output=this.output.bind(this),this.newTag=this.newTag.bind(this),this.popTag=this.popTag.bind(this),this.tagInputOnChange=this.tagInputOnChange.bind(this)}output(){let e=document.querySelector(".CreateCourses > input").value,t=window.frames.CreateCourse.document.body.innerHTML;""===t||""===e||this.state.tags.includes("")?alert("Plase fill in Title, Detail and Tag(s)."):fetch("/api/course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({create_course:{title:e,description:t,tags:this.state.tags}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({success_page:!0})})})}newTag(){if(this.state.tags.length<10){let e=this.state.tags;e.push(""),this.setState({tags:e})}}popTag(e){if(this.state.tags.length>1){let t=this.state.tags;t.splice(e,1),this.setState({tags:t})}}tagInputOnChange(e,t){let s=this.state.tags;s[t]=e,this.setState({tag:s},()=>console.log(this.state.tags))}render(){return n.a.createElement("div",{className:"CreateCourses content"},this.state.success_page?n.a.createElement("div",{className:"success_page"},n.a.createElement("div",null,"Success!"),n.a.createElement(l.b,{to:"/courses"},n.a.createElement("div",null,"Back to Courses Page"))):null,n.a.createElement("input",{type:"text",placeholder:"Courses Title",required:!0,maxLength:"40"}),n.a.createElement("div",{style:{fontSize:"2.5vh",width:"95%",margin:"auto"}},"Course Description:"),n.a.createElement(m,{editor:"CreateCourse"}),n.a.createElement("div",null,"Courses Tags ",n.a.createElement("img",{className:"add",onClick:this.newTag,src:"https://img.icons8.com/flat_round/64/000000/plus.png"})),n.a.createElement("ol",null,this.state.tags.map((e,t)=>n.a.createElement("li",null,n.a.createElement("input",{type:"text",className:"tag-input",value:e,maxLength:"15",onChange:e=>this.tagInputOnChange(e.target.value,t)}),0!==t?n.a.createElement("img",{className:"minus",src:"https://img.icons8.com/flat_round/64/000000/minus.png",onClick:()=>this.popTag(t)}):null))),n.a.createElement("button",{style:{display:"block"},className:"submit",onClick:this.output},"Create"))}}class b extends n.a.Component{constructor(e){super(e),this.state={myCourses:[]},this.child=n.a.createRef(),this.loadCourses=this.loadCourses.bind(this),this.callCourse=this.callCourse.bind(this)}componentDidMount(){this.loadCourses()}loadCourses(){fetch("/api/my_courses").then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({myCourses:e.my_courses},()=>console.log(this.state))})})}callCourse(e){this.child.current.loadCourse(e),this.child.current.loadLessons(e),this.child.current.loadComments(e),this.child.current.checkCanComment(e),this.child.current.checkMyCourse(e),this.child.current.checkIsCollection(e),this.child.current.openToggle()}render(){return n.a.createElement("div",{className:"MyCourses content"},n.a.createElement("ul",{className:"course-list"},this.state.myCourses.map(e=>n.a.createElement("li",{onClick:()=>this.callCourse(e.course_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,"Author: ",e.nickname," ",n.a.createElement("span",null,new Date(e.create_date).toISOString().split("T")[0]," ",new Date(e.create_date).toISOString().split("T")[1].split(".")[0])),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})))),n.a.createElement(C,{ref:this.child,user_id:this.props.user_id,loadCourses:this.loadCourses,userInfoToggle:this.props.userInfoToggle}))}}class y extends n.a.Component{constructor(e){super(e),this.state={CourseCollection:[]},this.child=n.a.createRef(),this.loadCourses=this.loadCourses.bind(this),this.callCourse=this.callCourse.bind(this)}componentDidMount(){this.loadCourses()}loadCourses(){fetch("/api/course_collection").then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({CourseCollection:e.course_collection},()=>console.log(this.state))})})}callCourse(e){this.child.current.loadCourse(e),this.child.current.loadLessons(e),this.child.current.loadComments(e),this.child.current.checkCanComment(e),this.child.current.checkMyCourse(e),this.child.current.checkIsCollection(e),this.child.current.openToggle()}render(){return n.a.createElement("div",{className:"CourseCollection content"},n.a.createElement("ul",{className:"course-list"},this.state.CourseCollection.map(e=>n.a.createElement("li",{onClick:()=>this.callCourse(e.course_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,"Author: ",e.nickname," ",n.a.createElement("span",null,new Date(e.create_date).toISOString().split("T")[0]," ",new Date(e.create_date).toISOString().split("T")[1].split(".")[0])),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})))),n.a.createElement(C,{ref:this.child,user_id:this.props.user_id,loadCourses:this.loadCourses,userInfoToggle:this.props.userInfoToggle}))}}class w extends n.a.Component{constructor(e){super(e),this.state={open:!1},this.openToggle=this.openToggle.bind(this),this.loadAnswer=this.loadAnswer.bind(this),this.submitEditedAnswer=this.submitEditedAnswer.bind(this)}loadAnswer(e){window.frames.EditAnswer.document.body.innerHTML=e}submitEditedAnswer(){let e=window.frames.EditAnswer.document.body.innerHTML;fetch("/api/submit_answer",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({submit_edited_answer:{question:this.props.question_id,edited_answer:e}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.props.reload(),this.openToggle()})})}openToggle(){this.setState({open:!this.state.open})}render(){return n.a.createElement("div",{className:this.state.open?"EditAnswer open":"EditAnswer close"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.openToggle}),n.a.createElement("span",null,"Edit Answer")),n.a.createElement(m,{editor:"EditAnswer"}),n.a.createElement("button",{onClick:this.submitEditedAnswer},"Submit Edited Answer"))}}class f extends n.a.Component{constructor(e){super(e),this.state={open:!1,answerField:!1,deleteQuestion:!1,canAnswer:!1,myQuestion:!1,isCollection:!1,question_id:"",title:"",create_by:"",nickname:"",detail:"",solved_by:0,answers:[]},this.child=n.a.createRef(),this.checkCanAnswer=this.checkCanAnswer.bind(this),this.checkMyQuestion=this.checkMyQuestion.bind(this),this.checkIsCollection=this.checkIsCollection.bind(this),this.loadQuestion=this.loadQuestion.bind(this),this.loadAnswers=this.loadAnswers.bind(this),this.deleteQuestion=this.deleteQuestion.bind(this),this.solveQuestion=this.solveQuestion.bind(this),this.collectionToggle=this.collectionToggle.bind(this),this.submitAnswer=this.submitAnswer.bind(this),this.editAnswer=this.editAnswer.bind(this),this.deleteAnswer=this.deleteAnswer.bind(this),this.likeAnswer=this.likeAnswer.bind(this),this.reload=this.reload.bind(this),this.openToggle=this.openToggle.bind(this),this.answerFieldToggle=this.answerFieldToggle.bind(this)}checkCanAnswer(e){fetch("/api/check_can_answer/"+e).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({canAnswer:e.canAnswer})})})}checkMyQuestion(e){fetch("/api/my_questions?q="+e).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({myQuestion:e.myQuestion},()=>console.log(this.state))})})}checkIsCollection(e){fetch("/api/question_collection?q="+e).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({isCollection:e.isCollection},()=>console.log(this.state))})})}loadQuestion(e){fetch("/api/question?q="+e).then(e=>{e.ok&&e.json().then(e=>{console.log(e.question),this.setState({answerField:!1,deleteQuestion:!1,question_id:e.question.question_id,title:e.question.title,create_by:e.question.create_by,nickname:e.question.nickname,detail:e.question.detail,solved_by:e.question.solved_by})})})}loadAnswers(e){fetch("/api/answers/"+e).then(e=>{e.ok&&e.json().then(e=>{this.setState({answers:e.answers})})})}deleteQuestion(){fetch("/api/question?q="+this.state.question_id,{method:"PATCH"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({deleteQuestion:!0}),this.props.loadQuestions()})})}solveQuestion(e){console.log(e),fetch("/api/solve_question",{method:"DELETE",method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({solve_question:{question:this.state.question_id,solved_by:e}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.loadQuestion(this.state.question_id)})})}collectionToggle(e,t){fetch("/api/question_collection?q="+e,{method:t}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.checkIsCollection(this.state.question_id),this.props.loadQuestions()})})}submitAnswer(){let e=QuestionComment.document.body.innerHTML;console.log(e),fetch("/api/submit_answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submit_answer:{question:this.state.question_id,answer:e}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.reload()})})}editAnswer(e){this.child.current.loadAnswer(e),this.child.current.openToggle()}deleteAnswer(){fetch("/api/submit_answer",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete_answer:{question:this.state.question_id}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.reload()})})}likeAnswer(e,t){fetch("/api/answer_likes?q="+this.state.question_id+"&c="+e,{method:t}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.loadAnswers(this.state.question_id)})})}reload(){this.checkCanAnswer(this.state.question_id),this.loadAnswers(this.state.question_id)}openToggle(){this.setState({open:!this.state.open})}answerFieldToggle(){this.setState({answerField:!this.state.answerField})}render(){window.location.origin;return n.a.createElement("div",{className:this.state.open?"Question open":"Question close"},this.state.deleteQuestion?n.a.createElement("div",{style:{top:"0",left:"0",position:"absolute",width:"100%",height:"100vh",background:"white"}},n.a.createElement("div",null,"Delete Question Success!"),n.a.createElement("div",{onClick:this.openToggle},"Back to Questions Page")):null,n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.openToggle}),n.a.createElement("span",null,"Question")),n.a.createElement("div",{className:"Question-detail"},n.a.createElement("div",null,this.state.title),n.a.createElement("div",{onClick:()=>this.props.userInfoToggle(this.state.create_by)},this.state.nickname),n.a.createElement("div",{className:"question_detail",dangerouslySetInnerHTML:{__html:this.state.detail}}),this.state.myQuestion?n.a.createElement("div",{onClick:this.deleteQuestion},"Delete Question"):null,null!==this.state.solved_by&&this.state.myQuestion?n.a.createElement("div",{onClick:()=>this.solveQuestion(0)},"Cancel Solved"):null,this.state.isCollection?n.a.createElement("div",{onClick:()=>this.collectionToggle(this.state.question_id,"DELETE")},"Remove from Collection"):n.a.createElement("div",{onClick:()=>this.collectionToggle(this.state.question_id,"POST")},"Add to Collection"),n.a.createElement("h3",null,"Answer"),null!==this.state.solved_by?this.state.answers.map(e=>{if(e.create_by===this.state.solved_by)return n.a.createElement("div",null,n.a.createElement("div",null,"Best Answer"),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.answer}}),n.a.createElement("div",{onClick:()=>this.props.userInfoToggle(e.create_by)},e.nickname),n.a.createElement("div",null,e.create_date),n.a.createElement("div",null,"Likes: ",e.likes),e.user_liked?n.a.createElement("button",{onClick:()=>this.likeAnswer(e.create_by,"DELETE")},"Unlike"):n.a.createElement("button",{onClick:()=>this.likeAnswer(e.create_by,"POST")},"Like"))}):null,this.state.canAnswer?n.a.createElement("div",null,n.a.createElement("div",{onClick:this.answerFieldToggle},"I want to answer!"),this.state.answerField?n.a.createElement("div",null,n.a.createElement(m,{editor:"QuestionComment"}),n.a.createElement("button",{onClick:this.submitAnswer},"Submit")):null):null,this.state.answers.map(e=>{if(e.create_by!==this.state.solved_by)return n.a.createElement("div",null,n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.answer}}),n.a.createElement("div",{onClick:()=>this.props.userInfoToggle(e.create_by)},e.nickname),n.a.createElement("div",null,e.create_date),n.a.createElement("div",null,"Likes: ",e.likes?e.likes:0),e.user_liked?n.a.createElement("button",{onClick:()=>this.likeAnswer(e.create_by,"DELETE")},"Unlike"):n.a.createElement("button",{onClick:()=>this.likeAnswer(e.create_by,"POST")},"Like"),this.props.user_id===e.create_by?n.a.createElement("div",null,n.a.createElement("div",{onClick:()=>this.editAnswer(e.answer)},"Edit"),n.a.createElement("div",{onClick:this.deleteAnswer},"Delete")):null,0!==this.state.solved_by&&null!==this.state.solved_by||!this.state.myQuestion?null:n.a.createElement("div",{onClick:()=>this.solveQuestion(e.create_by)},"This Answer Solve My Question!"))})),n.a.createElement(w,{ref:this.child,question_id:this.state.question_id,reload:this.reload}))}}class T extends n.a.Component{constructor(e){super(e),this.state={new:[],hot:[],search_mode:!1,search_query:"",search_result:[]},this.child=n.a.createRef(),this.loadQuestions=this.loadQuestions.bind(this),this.loadQuestionSearch=this.loadQuestionSearch.bind(this),this.callQuestion=this.callQuestion.bind(this),this.inputOnChange=this.inputOnChange.bind(this),this.inputKeyDown=this.inputKeyDown.bind(this),this.back=this.back.bind(this)}componentDidMount(){this.loadQuestions()}loadQuestions(){fetch("/api/questions").then(e=>{e.ok&&e.json().then(e=>{this.setState({new:e.questions.new,hot:e.questions.hot},()=>console.log(this.state))})})}loadQuestionSearch(){fetch("/api/questions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({search_query:this.state.search_query})}).then(e=>{e.ok&&e.json().then(e=>{this.setState({search_result:e.search_result},()=>console.log(this.state)),this.setState({search_mode:!0})})})}callQuestion(e){this.child.current.loadQuestion(e),this.child.current.loadAnswers(e),this.child.current.checkCanAnswer(e),this.child.current.checkMyQuestion(e),this.child.current.checkIsCollection(e),this.child.current.openToggle()}inputOnChange(e){this.setState({search_query:e.target.value})}inputKeyDown(e){"Enter"===e.key&&this.loadQuestionSearch()}back(){this.loadQuestions(),this.setState({search_mode:!1,search_query:""})}render(){return n.a.createElement("div",{className:"Questions content"},n.a.createElement("input",{className:"search",type:"text",placeholder:"Search Questions Here!",value:this.state.search_query,onChange:this.inputOnChange,onKeyDown:this.inputKeyDown}),n.a.createElement("button",{className:"search",onClick:this.loadQuestionSearch},"Search"),this.state.search_mode?n.a.createElement("div",null,n.a.createElement("h1",{className:"title"},n.a.createElement("img",{src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.back}),"Search Results"),n.a.createElement("ul",{className:"question-list"},this.state.search_result.map(e=>n.a.createElement("li",{onClick:()=>this.callQuestion(e.question_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,"Ask By: ",e.nickname," ",n.a.createElement("span",null,new Date(e.create_date).toISOString().split("T")[0]," ",new Date(e.create_date).toISOString().split("T")[1].split(".")[0])),e.solved_by?n.a.createElement("h6",{className:"solved"},"Solved"):n.a.createElement("h6",{className:"not-solved"},"Not Solved"))))):n.a.createElement("div",null,n.a.createElement(l.c,{to:"/questions/create",className:"option"},n.a.createElement("div",null,"Ask Questions")),n.a.createElement(l.c,{to:"/questions/my",className:"option"},n.a.createElement("div",null,"My Questions")),n.a.createElement(l.c,{to:"/questions/collection",className:"option"},n.a.createElement("div",null,"My Collection")),n.a.createElement("h1",{className:"title"},"New"),n.a.createElement("ul",{className:"question-list"},this.state.new.map(e=>n.a.createElement("li",{onClick:()=>this.callQuestion(e.question_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,"Ask By: ",e.nickname," ",n.a.createElement("span",null,new Date(e.create_date).toISOString().split("T")[0]," ",new Date(e.create_date).toISOString().split("T")[1].split(".")[0])),e.solved_by?n.a.createElement("h6",{className:"solved"},"Solved"):n.a.createElement("h6",{className:"not-solved"},"Not Solved")))),n.a.createElement("h1",{className:"title"},"Hotest"),n.a.createElement("ul",{className:"question-list"},this.state.hot.map(e=>n.a.createElement("li",{onClick:()=>this.callQuestion(e.question_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,"Ask By: ",e.nickname," ",n.a.createElement("span",null,new Date(e.create_date).toISOString().split("T")[0]," ",new Date(e.create_date).toISOString().split("T")[1].split(".")[0])),e.solved_by?n.a.createElement("h6",{className:"solved"},"Solved"):n.a.createElement("h6",{className:"not-solved"},"Not Solved"))))),n.a.createElement("div",{style:{textAlign:"center"}},"--- Bottom ---"),n.a.createElement(f,{ref:this.child,user_id:this.props.user_id,loadQuestions:this.loadQuestions,userInfoToggle:this.props.userInfoToggle}))}}class S extends n.a.Component{constructor(e){super(e),this.state={success_page:!1},this.output=this.output.bind(this)}output(){let e=document.querySelector(".CreateQuestions > input").value,t=window.frames.CreateQuestion.document.body.innerHTML;""!==t&&""!==e?fetch("/api/question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({create_question:{title:e,content:t}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({success_page:!0})})}):alert("Plase fill in Title and Detail.")}render(){return n.a.createElement("div",{className:"CreateQuestions content"},this.state.success_page?n.a.createElement("div",{style:{top:"0",left:"0",position:"absolute",width:"100%",height:"100vh",background:"white"}},n.a.createElement("div",null,"Success!"),n.a.createElement(l.b,{to:"/questions"},n.a.createElement("div",null,"Back to Questions Page"))):null,n.a.createElement("input",{type:"text",placeholder:"Question Title",required:!0}),n.a.createElement(m,{editor:"CreateQuestion"}),n.a.createElement("button",{className:"submit",onClick:this.output},"Ask!"))}}class N extends n.a.Component{constructor(e){super(e),this.state={my_questions:[]},this.loadMyQuestions=this.loadMyQuestions.bind(this),this.callQuestion=this.callQuestion.bind(this),this.child=n.a.createRef()}componentDidMount(){this.loadMyQuestions()}loadMyQuestions(){fetch("/api/my_questions").then(e=>{e.ok&&e.json().then(e=>{this.setState({my_questions:e.my_questions},()=>console.log(this.state))})})}callQuestion(e){this.child.current.loadQuestion(e),this.child.current.loadAnswers(e),this.child.current.checkCanAnswer(e),this.child.current.checkMyQuestion(e),this.child.current.checkIsCollection(e),this.child.current.openToggle()}render(){return n.a.createElement("div",{className:"MyQuestions content"},n.a.createElement("ul",{className:"question-list"},this.state.my_questions.map(e=>n.a.createElement("li",{onClick:()=>this.callQuestion(e.question_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,e.nickname),n.a.createElement("h6",null,e.create_date)))),n.a.createElement("div",{style:{textAlign:"center"}},"--- Bottom ---"),n.a.createElement(f,{ref:this.child,user_id:this.props.user_id,loadQuestions:this.loadMyQuestions,userInfoToggle:this.props.userInfoToggle}))}}class q extends n.a.Component{constructor(e){super(e),this.state={question_collection:[]},this.loadQuestionCollection=this.loadQuestionCollection.bind(this),this.callQuestion=this.callQuestion.bind(this),this.child=n.a.createRef()}componentDidMount(){this.loadQuestionCollection()}loadQuestionCollection(){fetch("/api/question_collection").then(e=>{e.ok&&e.json().then(e=>{this.setState({question_collection:e.question_collection},()=>console.log(this.state))})})}callQuestion(e){this.child.current.loadQuestion(e),this.child.current.loadAnswers(e),this.child.current.checkCanAnswer(e),this.child.current.checkMyQuestion(e),this.child.current.checkIsCollection(e),this.child.current.openToggle()}render(){return n.a.createElement("div",{className:"QuestionCollection content"},n.a.createElement("ul",{className:"question-list"},this.state.question_collection.map(e=>n.a.createElement("li",{onClick:()=>this.callQuestion(e.question_id)},n.a.createElement("h4",null,e.title),n.a.createElement("h6",null,e.nickname),n.a.createElement("h6",null,e.create_date)))),n.a.createElement("div",{style:{textAlign:"center"}},"--- Bottom ---"),n.a.createElement(f,{ref:this.child,user_id:this.props.user_id,loadQuestions:this.loadQuestionCollection,userInfoToggle:this.props.userInfoToggle}))}}class I extends n.a.Component{constructor(e){super(e),this.state={permission:!1,editToggle:!1,success_page:!1,classroom_id:"",name:"",description:"",create_by:"",nickname:"",create_date:"",newName:"",newDescription:""},this.loadClassroom=this.loadClassroom.bind(this),this.editClassroom=this.editClassroom.bind(this),this.editToggle=this.editToggle.bind(this),this.deleteClassroom=this.deleteClassroom.bind(this)}componentDidMount(){this.loadClassroom()}componentDidUpdate(e){e.match.params!==this.props.match.params&&e.match.path===this.props.match.path&&this.loadClassroom()}loadClassroom(){console.log(this.props),fetch("/api/classroom?c="+this.props.match.params.class).then(e=>{e.ok&&e.json().then(e=>{console.log(e),"Error"!==e.classroom?this.setState({permission:!0,classroom_id:e.classroom.classroom_id,name:e.classroom.name,newName:e.classroom.name,description:e.classroom.description,newDescription:e.classroom.description,create_by:e.classroom.create_by,nickname:e.classroom.nickname,create_date:e.classroom.create_date}):this.props.history.goBack()})})}newNameInputOnChange(e){this.setState({newName:e})}newDescriptionOnChange(e){this.setState({newDescription:e})}editClassroom(e){e.preventDefault();let t=document.forms.form_editClassroom;""!==t.classroom_name.value?fetch("/api/classroom?c="+this.props.match.params.class,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({editClassroom:{name:t.classroom_name.value,description:t.classroom_description.value}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),t.classroom_name.value="",t.classroom_description.value="",this.editToggle(),this.loadClassroom()})}):alert("Please at least fill in the name of the classroom.")}editToggle(){this.setState({editToggle:!this.state.editToggle})}deleteClassroom(){fetch("/api/classroom?c="+this.props.match.params.class,{method:"DELETE"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({success_page:!0}),this.props.reload()})})}render(){return n.a.createElement("div",{className:"Classroom content"},n.a.createElement("div",{className:"header"},n.a.createElement(l.b,{className:"header-icon",to:"/classrooms"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png"})),n.a.createElement("span",null,"Classroom")),this.state.permission?n.a.createElement("div",null,this.state.success_page?n.a.createElement("div",{style:{top:"0",left:"0",position:"absolute",width:"100%",height:"100vh",background:"white"}},n.a.createElement("div",null,"Delete Success!"),n.a.createElement(l.b,{to:"/classrooms"},n.a.createElement("div",null,"Back to Classrooms Page"))):null,n.a.createElement("div",null,n.a.createElement("div",null,this.state.name),n.a.createElement("div",{onClick:()=>this.props.userInfoToggle(this.state.create_by)},this.state.nickname),n.a.createElement("div",null,n.a.createElement("pre",{style:{fontFamily:"inherit"}},this.state.description)),n.a.createElement("div",null,this.state.create_date)),n.a.createElement("ul",{className:"classroom-item"},"teacher"===this.props.user_type?n.a.createElement("li",{onClick:this.editToggle},"Edit Description"):null,this.state.editToggle&&"teacher"===this.props.user_type?n.a.createElement("li",null,n.a.createElement("form",{name:"form_editClassroom",onSubmit:this.editClassroom},n.a.createElement("input",{type:"text",name:"classroom_name",placeholder:"Name of the Classroom",value:this.state.newName,onChange:e=>this.newNameInputOnChange(e.target.value),required:!0}),n.a.createElement("textarea",{name:"classroom_description",placeholder:"Desceibe the Classroom here...",value:this.state.newDescription,onChange:e=>this.newDescriptionOnChange(e.target.value),required:!0}),n.a.createElement("input",{type:"submit"}))):null,n.a.createElement(l.b,{to:"/classrooms/"+this.state.classroom_id+"/members"},n.a.createElement("li",null,"Members")),n.a.createElement(l.b,{to:"/classrooms/"+this.state.classroom_id+"/tasks"},n.a.createElement("li",null,"Tasks")),"teacher"===this.props.user_type?n.a.createElement(l.b,{to:"/classrooms/"+this.state.classroom_id+"/create_task"},n.a.createElement("li",null,"Create Task")):null,n.a.createElement(l.b,{to:"/classrooms/"+this.state.classroom_id+"/calendar"},n.a.createElement("li",null,"Calendar")),n.a.createElement(l.b,{to:"/classrooms/"+this.state.classroom_id+"/chat"},n.a.createElement("li",null,"Chatroom")),n.a.createElement("li",null),"teacher"===this.props.user_type?n.a.createElement("li",{onClick:this.deleteClassroom},"Delete Classroom"):null)):n.a.createElement("div",null,"Please Wait..."))}}var O=Object(r.g)(I);class D extends n.a.Component{constructor(e){super(e),this.state={ClassroomMembers:[],permission:!1},this.loadClassroomMembers=this.loadClassroomMembers.bind(this),this.checkPermission=this.checkPermission.bind(this),this.inviteMember=this.inviteMember.bind(this),this.kickFromClassroom=this.kickFromClassroom.bind(this)}componentDidMount(){this.checkPermission()}componentDidUpdate(e){e.match.params!==this.props.match.params&&this.checkPermission()}checkPermission(){fetch("/api/classroom_member?c="+this.props.match.params.class).then(e=>{e.ok&&e.json().then(e=>{if(e.member)this.setState({permission:!0},()=>this.loadClassroomMembers());else try{this.props.history.goBack()}catch(e){window.history.back()}})})}loadClassroomMembers(){console.log(this.props),this.state.permission&&fetch("/api/classroom_members?c="+this.props.match.params.class).then(e=>{e.ok&&e.json().then(e=>{console.log(e),"Error"!==e.classroom_members?this.setState({classroom:e.classroom,ClassroomMembers:e.classroom_members}):this.props.history.goBack()})})}inviteMember(e){e.preventDefault();let t=document.forms.form_inviteMember;t.user.value&&t.user.value>0?fetch("/api/classroom_members?c="+this.props.match.params.class+"&i="+t.user.value,{method:"POST"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.loadClassroomMembers()})}):alert("Please fill in a valid ID.")}kickFromClassroom(e){fetch("/api/classroom_members?c="+this.props.match.params.class+"&i="+e,{method:"DELETE"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.loadClassroomMembers()})})}render(){return n.a.createElement("div",{className:"ClassroomMembers content"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.props.history.goBack}),n.a.createElement("span",null,"Classroom Members")),this.state.permission?n.a.createElement("div",null,n.a.createElement("div",null,this.state.classroom?this.state.classroom.name:null,": Member List"),n.a.createElement("form",{onSubmit:this.inviteMember,name:"form_inviteMember"},"Invite Member: ",n.a.createElement("input",{type:"number",name:"user",required:!0})," ",n.a.createElement("input",{type:"submit"})," "),n.a.createElement("ul",null,this.state.ClassroomMembers.map(e=>n.a.createElement("li",null,n.a.createElement("div",{onClick:()=>this.props.userInfoToggle(e.user_id)},"ID: ",e.user_id),n.a.createElement("div",{onClick:()=>this.props.userInfoToggle(e.user_id)},e.fullname.toUpperCase()," ",e.nickname),n.a.createElement("div",null,"Type: ",e.user_type),n.a.createElement("div",null,"Join Date: ",e.join_date),"student"===e.user_type&&"teacher"===this.props.user_type?n.a.createElement("button",{onClick:()=>this.kickFromClassroom(e.user_id)},"Kick"):null)))):n.a.createElement("div",null,"Please Wait..."))}}var Q=Object(r.g)(D);class M extends n.a.Component{constructor(e){super(e),this.state={tasks:[],permission:!1},this.loadTasks=this.loadTasks.bind(this),this.checkPermission=this.checkPermission.bind(this)}componentDidMount(){this.checkPermission()}componentDidUpdate(e){e.match.params!==this.props.match.params&&this.checkPermission()}checkPermission(){fetch("/api/classroom_member?c="+this.props.match.params.class).then(e=>{e.ok&&e.json().then(e=>{if(e.member)this.setState({permission:!0},()=>this.loadTasks());else try{this.props.history.goBack()}catch(e){window.history.back()}})})}loadTasks(){this.state.permission&&fetch("/api/tasks?c="+this.props.match.params.class).then(e=>{e.ok&&e.json().then(e=>{console.log(e),"Error"!==e.tasks?this.setState({classroom:e.classroom,tasks:e.tasks}):this.props.history.goBack()})})}render(){return n.a.createElement("div",{className:"Tasks content"},n.a.createElement("div",{className:"header"},n.a.createElement(l.b,{className:"header-icon",to:"/classrooms/"+this.props.match.params.class},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png"})),n.a.createElement("span",null,"Classroom Tasks")),this.state.permission?n.a.createElement("div",null,n.a.createElement("div",null,this.state.classroom?this.state.classroom.name:null,": Tasks List"),n.a.createElement("ul",null,this.state.tasks.map(e=>n.a.createElement(l.b,{to:this.props.location.pathname+"/"+e.task_num},n.a.createElement("li",null,n.a.createElement("div",null,"Title: ",e.title,e.force_close?"(Closed)":null),n.a.createElement("div",null,"Deadline: ",e.deadline)))))):n.a.createElement("div",null,"Please Wait..."))}}var A=Object(r.g)(M);class L extends n.a.Component{constructor(e){super(e),this.state={title:"",create_date:"",deadline:"",task_answers:[],forceClose:!1,permission:!1,success_page:!1},this.loadTask=this.loadTask.bind(this),this.loadAnswer=this.loadAnswer.bind(this),this.checkPermission=this.checkPermission.bind(this),this.forceClose=this.forceClose.bind(this),this.deleteTask=this.deleteTask.bind(this)}componentDidMount(){this.checkPermission(),this.loadAnswer()}componentDidUpdate(e){e.match.params!==this.props.match.params&&this.checkPermission()}checkPermission(){fetch("/api/classroom_member?c="+this.props.match.params.class).then(e=>{e.ok&&e.json().then(e=>{if(e.member)this.setState({permission:!0},()=>this.loadTask());else try{this.props.history.goBack()}catch(e){window.history.back()}})})}loadTask(){this.state.permission&&fetch("/api/task?c="+this.props.match.params.class+"&t="+this.props.match.params.task).then(e=>{e.ok&&e.json().then(e=>{console.log(e),"Error"!==e.task&&null!=e.task?this.setState({classroom:e.classroom,title:e.task.title,create_date:e.task.create_date,deadline:e.task.deadline,forceClose:e.task.force_close}):this.props.history.goBack()})})}loadAnswer(){fetch("/api/task_answers?c="+this.props.match.params.class+"&t="+this.props.match.params.task).then(e=>{e.ok&&e.json().then(e=>{this.setState({task_answers:e.task_answers})})})}forceClose(){fetch("/api/task?c="+this.props.match.params.class+"&t="+this.props.match.params.task,{method:"PATCH"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.loadTask()})})}deleteTask(){fetch("/api/task?c="+this.props.match.params.class+"&t="+this.props.match.params.task,{method:"DELETE"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({success_page:!0})})})}render(){return n.a.createElement("div",{className:"Task content"},n.a.createElement("div",{className:"header"},n.a.createElement(l.b,{className:"header-icon",to:"/classrooms/"+this.props.match.params.class+"/tasks"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png"})),n.a.createElement("span",null,"Classroom Task")),this.state.permission?n.a.createElement("div",null,this.state.success_page?n.a.createElement("div",{style:{top:"0",left:"0",position:"absolute",width:"100%",height:"100vh",background:"white"}},n.a.createElement("div",null,"Delete Success!"),n.a.createElement(l.b,{to:"/classrooms/"+this.props.match.params.class+"/tasks"},n.a.createElement("div",null,"Back to Tasks Page"))):null,n.a.createElement("div",null,"Task Title: ",this.state.title),n.a.createElement("div",null,this.state.create_date),n.a.createElement("div",null,this.state.deadline),"teacher"===this.props.user_type?new Date>new Date(this.state.deadline)||this.state.forceClose?n.a.createElement(l.b,{to:this.props.location.pathname+"/results"},n.a.createElement("button",null,"Result")):n.a.createElement("div",null,n.a.createElement(l.b,{to:this.props.location.pathname+"/edit"},n.a.createElement("button",null,"Edit")),n.a.createElement("br",null),n.a.createElement("button",{onClick:this.forceClose},"Force Close"),n.a.createElement("br",null),n.a.createElement("button",{onClick:this.deleteTask},"Delete")):new Date>new Date(this.state.deadline)||this.state.forceClose?n.a.createElement(l.b,{to:this.props.location.pathname+"/results/"+this.props.user_id},n.a.createElement("button",null,"Result")):this.state.task_answers.length>0?n.a.createElement(l.b,{to:this.props.location.pathname+"/edit_answer/"+this.props.user_id},n.a.createElement("button",null,"Edit Answer")):n.a.createElement(l.b,{to:this.props.location.pathname+"/answer"},n.a.createElement("button",null,"Answer"))):n.a.createElement("div",null,"Please Wait..."))}}var j=Object(r.g)(L),P=s(13),x=s.n(P);let R={type:"MC",question:"",answer:1,choice:["","","",""],category:""},J={type:"SQ",question:"",answer:"",choice:[],category:""};class B extends n.a.Component{constructor(e){super(e),this.state={permission:!1,success_page:!1,title:"",questions:[],deadline:void 0},this.checkPermission=this.checkPermission.bind(this),this.create_task=this.create_task.bind(this),this.titleOnChange=this.titleOnChange.bind(this),this.deadlineOnChange=this.deadlineOnChange.bind(this),this.newMCQ=this.newMCQ.bind(this),this.newSQ=this.newSQ.bind(this),this.popQuestion=this.popQuestion.bind(this),this.categoryInputOnChange=this.categoryInputOnChange.bind(this),this.answerInputOnChange=this.answerInputOnChange.bind(this),this.choiceInputOnChange=this.choiceInputOnChange.bind(this),this.textareaOnChange=this.textareaOnChange.bind(this),this.answerInputOnChange=this.answerInputOnChange.bind(this),this.addChoice=this.addChoice.bind(this),this.popChoice=this.popChoice.bind(this)}componentDidMount(){this.checkPermission()}checkPermission(){fetch("/api/classroom_member?c="+this.props.match.params.class).then(e=>{e.ok&&e.json().then(e=>{if(e.member)this.setState({permission:!0});else try{this.props.history.goBack()}catch(e){window.history.back()}})})}create_task(){let e=this.state.questions.slice(),t=!1;e.forEach(e=>{(""===e.question||""===e.answer||e.choice.includes(""))&&(t=!0)}),""!==this.state.title&&void 0!==this.state.deadline&&e.length>0&&!t?fetch("/api/task?c="+this.props.match.params.class,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:{title:this.state.title,deadline:this.state.deadline,questions:this.state.questions}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({success_page:!0})})}):alert("Please create at least 1 question fill in all the blanks")}titleOnChange(e){this.setState({title:e.target.value})}deadlineOnChange(e){this.setState({deadline:e})}newMCQ(){let e=this.state.questions.slice(),t=JSON.parse(JSON.stringify(R));e.push(t),this.setState({questions:e})}newSQ(){let e=this.state.questions.slice(),t=JSON.parse(JSON.stringify(J));e.push(t),this.setState({questions:e})}popQuestion(e){let t=this.state.questions.slice();t.splice(e,1),this.setState({questions:t})}categoryInputOnChange(e,t){let s=this.state.questions.slice();s[t].category=e,this.setState({questions:s})}choiceInputOnChange(e,t,s){let a=this.state.questions.slice();a[t].choice[s]=e,this.setState({questions:a})}answerInputOnChange(e,t){let s=this.state.questions.slice();s[t].answer=e,this.setState({questions:s})}textareaOnChange(e,t){let s=this.state.questions.slice();s[t].question=e,this.setState({questions:s})}mcAnswerToggle(e,t){let s=this.state.questions.slice();s[e].answer=t,this.setState({questions:s})}addChoice(e){let t=this.state.questions.slice();t[e].choice.push(""),this.setState({questions:t})}popChoice(e,t){let s=this.state.questions.slice();s[e].choice.splice(t,1),this.setState({questions:s})}render(){const{deadline:e}=this.state;return n.a.createElement("div",{className:"CreateTask content"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.props.history.goBack}),n.a.createElement("span",null,"Create Task")),this.state.permission?n.a.createElement("div",null,this.state.success_page?n.a.createElement("div",{style:{top:"0",left:"0",position:"absolute",width:"100%",height:"100vh",background:"white"}},n.a.createElement("div",null,"Success!"),n.a.createElement(l.b,{to:"/classrooms"},n.a.createElement("div",null,"Back to Classroom Page"))):null,n.a.createElement("input",{type:"text",value:this.state.title,onChange:this.titleOnChange,placeholder:"Task Title"}),n.a.createElement("br",null),n.a.createElement(x.a,{onDayChange:this.deadlineOnChange}),n.a.createElement("div",null,"Questions:"),this.state.questions.map((e,t)=>n.a.createElement("div",null,n.a.createElement("textarea",{placeholder:"Type in your Task Question Here...",value:e.question,onChange:e=>this.textareaOnChange(e.target.value,t)}),n.a.createElement("div",{onClick:()=>this.popQuestion(t)},"Delete Question"),n.a.createElement("ul",null,n.a.createElement("input",{type:"text",value:e.category,onChange:e=>this.categoryInputOnChange(e.target.value,t),placeholder:"Question Cateory (Optional)"}),"MC"===e.type&&e.choice.length<4?n.a.createElement("div",null,"New Choice",n.a.createElement("img",{onClick:()=>this.addChoice(t),src:"https://img.icons8.com/flat_round/64/000000/plus.png"})):null,"MC"==e.type?e.choice.map((s,a)=>n.a.createElement("li",null,"A",a+1,":",n.a.createElement("input",{type:"text",value:s,onChange:e=>this.choiceInputOnChange(e.target.value,t,a),placeholder:"Multiple Choice"}),n.a.createElement("span",{className:a+1===e.answer?"task_answer_toggle yes":"task_answer_toggle no",onClick:()=>this.mcAnswerToggle(t,a+1)},"Answer"),e.choice.length>2?n.a.createElement("img",{src:"https://img.icons8.com/flat_round/64/000000/minus.png",onClick:()=>this.popChoice(t,a)}):null)):n.a.createElement("li",null,"Answer: ",n.a.createElement("input",{type:"text",value:e.answer,onChange:e=>this.answerInputOnChange(e.target.value,t)}))))),n.a.createElement("div",{onClick:this.newMCQ},"New MC Question"),n.a.createElement("div",{onClick:this.newSQ},"New Short Question"),n.a.createElement("button",{onClick:this.create_task},"Create Task")):n.a.createElement("div",null,"Please Wait..."))}}var F=Object(r.g)(B);let U={type:"MC",question:"",answer:1,choice:["","","",""],category:""},$={type:"SQ",question:"",answer:"",choice:[],category:""};class H extends n.a.Component{constructor(e){super(e),this.state={permission:!1,success_page:!1,title:"",questions:[],deadline:new Date},this.checkPermission=this.checkPermission.bind(this),this.loadTaskQuestions=this.loadTaskQuestions.bind(this),this.edit_task=this.edit_task.bind(this),this.titleOnChange=this.titleOnChange.bind(this),this.deadlineOnChange=this.deadlineOnChange.bind(this),this.newMCQ=this.newMCQ.bind(this),this.newSQ=this.newSQ.bind(this),this.popQuestion=this.popQuestion.bind(this),this.categoryInputOnChange=this.categoryInputOnChange.bind(this),this.answerInputOnChange=this.answerInputOnChange.bind(this),this.choiceInputOnChange=this.choiceInputOnChange.bind(this),this.textareaOnChange=this.textareaOnChange.bind(this),this.answerInputOnChange=this.answerInputOnChange.bind(this),this.addChoice=this.addChoice.bind(this),this.popChoice=this.popChoice.bind(this)}componentDidMount(){this.checkPermission()}checkPermission(){fetch("/api/classroom_member?c="+this.props.match.params.class).then(e=>{e.ok&&e.json().then(e=>{if(e.member)this.setState({permission:!0},()=>this.loadTaskQuestions());else try{this.props.history.goBack()}catch(e){window.history.back()}})})}loadTaskQuestions(){this.state.permission&&fetch("/api/task_questions?c="+this.props.match.params.class+"&t="+this.props.match.params.task).then(e=>{e.ok&&e.json().then(e=>{console.log(e),"Error"===e.task||new Date>new Date(e.task.deadline)||e.task.force_close?this.props.history.goBack():this.setState({title:e.task.title,deadline:new Date(e.task.deadline),questions:e.task.task_questions})})})}edit_task(){let e=this.state.questions.slice(),t=!1;e.forEach(e=>{(""===e.question||""===e.answer||e.choice.includes(""))&&(t=!0)}),""!==this.state.title&&void 0!==this.state.deadline&&e.length>0&&!t?fetch("/api/task?c="+this.props.match.params.class+"&t="+this.props.match.params.task,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:{title:this.state.title,deadline:this.state.deadline,questions:this.state.questions}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({success_page:!0})})}):alert("Please create at least 1 question fill in all the blanks")}titleOnChange(e){this.setState({title:e.target.value})}deadlineOnChange(e){this.setState({deadline:e})}newMCQ(){let e=this.state.questions.slice(),t=JSON.parse(JSON.stringify(U));e.push(t),this.setState({questions:e})}newSQ(){let e=this.state.questions.slice(),t=JSON.parse(JSON.stringify($));e.push(t),this.setState({questions:e})}popQuestion(e){let t=this.state.questions.slice();t.splice(e,1),this.setState({questions:t})}categoryInputOnChange(e,t){let s=this.state.questions.slice();s[t].category=e,this.setState({questions:s})}choiceInputOnChange(e,t,s){let a=this.state.questions.slice();a[t].choice[s]=e,this.setState({questions:a})}answerInputOnChange(e,t){let s=this.state.questions.slice();s[t].answer=e,this.setState({questions:s})}textareaOnChange(e,t){let s=this.state.questions.slice();s[t].question=e,this.setState({questions:s})}mcAnswerToggle(e,t){let s=this.state.questions.slice();s[e].answer=t,this.setState({questions:s})}addChoice(e){let t=this.state.questions.slice();t[e].choice.push(""),this.setState({questions:t})}popChoice(e,t){let s=this.state.questions.slice();s[e].choice.splice(t,1),this.setState({questions:s})}render(){console.log(this.props.match);const{deadline:e}=this.state;return n.a.createElement("div",{className:"EditTask content"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.props.history.goBack}),n.a.createElement("span",null,"Edit Task")),this.state.permission?n.a.createElement("div",null,this.state.success_page?n.a.createElement("div",{style:{top:"0",left:"0",position:"absolute",width:"100%",height:"100vh",background:"white"}},n.a.createElement("div",null,"Success!"),n.a.createElement(l.b,{to:this.props.match.url.replace("/edit","")},n.a.createElement("div",null,"Back to Task Page"))):null,n.a.createElement("input",{type:"text",value:this.state.title,onChange:this.titleOnChange,placeholder:"Task Title"}),n.a.createElement("br",null),n.a.createElement(x.a,{onDayChange:this.deadlineOnChange,value:new Date(this.state.deadline).toISOString().split("T")[0],Format:"YYYY-MM-DD"}),n.a.createElement("div",null,"Questions:"),this.state.questions.map((e,t)=>n.a.createElement("div",null,n.a.createElement("textarea",{placeholder:"Type in your Task Question Here...",value:e.question,onChange:e=>this.textareaOnChange(e.target.value,t)}),n.a.createElement("div",{onClick:()=>this.popQuestion(t)},"Delete Question"),n.a.createElement("ul",null,n.a.createElement("input",{type:"text",value:e.category,onChange:e=>this.categoryInputOnChange(e.target.value,t),placeholder:"Question Cateory (Optional)"}),"MC"===e.type.toUpperCase()&&e.choice.length<4?n.a.createElement("div",null,"New Choice",n.a.createElement("img",{onClick:()=>this.addChoice(t),src:"https://img.icons8.com/flat_round/64/000000/plus.png"})):null,"MC"==e.type.toUpperCase()?e.choice.map((s,a)=>n.a.createElement("li",null,"A",a+1,":",n.a.createElement("input",{type:"text",value:s,onChange:e=>this.choiceInputOnChange(e.target.value,t,a),placeholder:"Multiple Choice"}),n.a.createElement("span",{className:a+1===e.answer?"task_answer_toggle yes":"task_answer_toggle no",onClick:()=>this.mcAnswerToggle(t,a+1)},"Answer"),e.choice.length>2?n.a.createElement("img",{src:"https://img.icons8.com/flat_round/64/000000/minus.png",onClick:()=>this.popChoice(t,a)}):null)):n.a.createElement("li",null,"Answer: ",n.a.createElement("input",{type:"text",value:e.answer,onChange:e=>this.answerInputOnChange(e.target.value,t)}))))),n.a.createElement("div",{onClick:this.newMCQ},"New MC Question"),n.a.createElement("div",{onClick:this.newSQ},"New Short Question"),n.a.createElement("button",{onClick:this.edit_task},"Edit Task")):n.a.createElement("div",null,"Please Wait..."))}}var K=Object(r.g)(H);class Y extends n.a.Component{constructor(e){super(e),this.state={questions:[],permission:!1,success_page:!1},this.checkPermission=this.checkPermission.bind(this),this.loadTaskQuestions=this.loadTaskQuestions.bind(this),this.answerTask=this.answerTask.bind(this),this.answerInputOnChange=this.answerInputOnChange.bind(this),this.mcAnswerToggle=this.mcAnswerToggle.bind(this)}componentDidMount(){this.checkPermission()}checkPermission(){fetch("/api/classroom_member?c="+this.props.match.params.class).then(e=>{e.ok&&e.json().then(e=>{if(e.member)this.setState({permission:!0},()=>this.loadTaskQuestions());else try{this.props.history.goBack()}catch(e){window.history.back()}})})}loadTaskQuestions(){this.state.permission&&fetch("/api/student_task_questions?c="+this.props.match.params.class+"&t="+this.props.match.params.task).then(e=>{e.ok&&e.json().then(e=>{console.log(e),"Error"===e.task||new Date>new Date(e.task.deadline)||e.task.force_close?this.props.history.goBack():this.setState({questions:e.task.task_questions})})})}answerTask(){let e=this.state.questions.slice(),t=!1;e.forEach(e=>{""===e.answer&&(t=!0)}),t?alert("Please Answer All the Questions"):fetch("/api/task_answers?c="+this.props.match.params.class+"&t="+this.props.match.params.task,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer_task:{questions:this.state.questions}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({success_page:!0})})})}answerInputOnChange(e,t){let s=this.state.questions.slice();s[t].answer=e,this.setState({questions:s})}mcAnswerToggle(e,t){let s=this.state.questions.slice();s[e].answer=s.slice()[e].choice[t],this.setState({questions:s})}render(){return n.a.createElement("div",{className:"AnswerTask content"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.props.history.goBack}),n.a.createElement("span",null,"Answer Task")),this.state.permission?n.a.createElement("div",null,this.state.success_page?n.a.createElement("div",{style:{top:"0",left:"0",position:"absolute",width:"100%",height:"100vh",background:"white"}},n.a.createElement("div",null,"Success!"),n.a.createElement(l.b,{to:this.props.match.url.replace("/answer","")},n.a.createElement("div",null,"Back to Task Page"))):null,n.a.createElement("div",null,"Questions:"),this.state.questions.map((e,t)=>n.a.createElement("div",null,n.a.createElement("div",null,"Question: ",e.question_num),n.a.createElement("div",null,n.a.createElement("pre",{style:{fontFamily:"inherit"}},e.question)),n.a.createElement("ul",null,"MC"==e.type.toUpperCase()?e.choice.map((s,a)=>n.a.createElement("li",null,n.a.createElement("div",{className:s===e.answer?"task_answer_toggle yes":"task_answer_toggle no",onClick:()=>this.mcAnswerToggle(t,a)},"A",a+1,":",s))):n.a.createElement("li",null,"Answer: ",n.a.createElement("input",{type:"text",value:e.answer,onChange:e=>this.answerInputOnChange(e.target.value,t)}))))),n.a.createElement("button",{onClick:this.answerTask},"Answer Task")):n.a.createElement("div",null,"Please Wait..."))}}var W=Object(r.g)(Y);class G extends n.a.Component{constructor(e){super(e),this.state={questions:[],task_answers:[],permission:!1,success_page:!1},this.checkPermission=this.checkPermission.bind(this),this.loadAnswer=this.loadAnswer.bind(this),this.loadTaskQuestions=this.loadTaskQuestions.bind(this),this.editAnswer=this.editAnswer.bind(this),this.answerInputOnChange=this.answerInputOnChange.bind(this),this.mcAnswerToggle=this.mcAnswerToggle.bind(this)}componentDidMount(){this.checkPermission()}checkPermission(){fetch("/api/task_answers?c="+this.props.match.params.class+"&t="+this.props.match.params.task+"&s="+this.props.match.params.student).then(e=>{e.ok&&e.json().then(e=>{if(console.log(e),"OK"===e.edit_task)this.setState({permission:!0},()=>this.loadTaskQuestions());else try{this.props.history.goBack()}catch(e){window.history.back()}})})}loadAnswer(){fetch("/api/task_answers?c="+this.props.match.params.class+"&t="+this.props.match.params.task).then(e=>{e.ok&&e.json().then(e=>{let t=this.state.questions.slice();t.map((t,s)=>{t.answer=e.task_answers[s].answer}),this.setState({questions:t})})})}loadTaskQuestions(){this.state.permission&&fetch("/api/student_task_questions?c="+this.props.match.params.class+"&t="+this.props.match.params.task).then(e=>{e.ok&&e.json().then(e=>{console.log(e),"Error"===e.task||new Date>new Date(e.task.deadline)||e.task.force_close?this.props.history.goBack():this.setState({questions:e.task.task_questions},()=>this.loadAnswer())})})}editAnswer(){let e=this.state.questions.slice(),t=!1;e.forEach(e=>{""===e.answer&&(t=!0)}),t?alert("Please Answer All the Questions"):fetch("/api/task_answers?c="+this.props.match.params.class+"&t="+this.props.match.params.task,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer_task:{questions:this.state.questions}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({success_page:!0})})})}answerInputOnChange(e,t){let s=this.state.questions.slice();s[t].answer=e,this.setState({questions:s})}mcAnswerToggle(e,t){let s=this.state.questions.slice();s[e].answer=s.slice()[e].choice[t],this.setState({questions:s})}render(){return n.a.createElement("div",{className:"EditAnswer content"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.props.history.goBack}),n.a.createElement("span",null,"Edit Answer")),this.state.permission?n.a.createElement("div",null,this.state.success_page?n.a.createElement("div",{style:{top:"0",left:"0",position:"absolute",width:"100%",height:"100vh",background:"white"}},n.a.createElement("div",null,"Success!"),n.a.createElement(l.b,{to:"/classrooms/"+this.props.match.params.class+"/tasks/"+this.props.match.params.task},n.a.createElement("div",null,"Back to Task Page"))):null,n.a.createElement("div",null,"Questions:"),this.state.questions.map((e,t)=>n.a.createElement("div",null,n.a.createElement("div",null,"Question: ",e.question_num),n.a.createElement("div",null,n.a.createElement("pre",{style:{fontFamily:"inherit"}},e.question)),n.a.createElement("ul",null,"MC"==e.type.toUpperCase()?e.choice.map((s,a)=>n.a.createElement("li",null,n.a.createElement("div",{className:s===e.answer?"task_answer_toggle yes":"task_answer_toggle no",onClick:()=>this.mcAnswerToggle(t,a)},"A",a+1,": ",s))):n.a.createElement("li",null,"Answer: ",n.a.createElement("input",{type:"text",value:e.answer,onChange:e=>this.answerInputOnChange(e.target.value,t)}))))),n.a.createElement("button",{onClick:this.editAnswer},"Edit Answer")):n.a.createElement("div",null,"Please Wait..."))}}var X,z,V,Z=Object(r.g)(G);CanvasJS=CanvasJS.Chart?CanvasJS:window.CanvasJS;class ee extends n.a.Component{constructor(e){super(e),this.options=e.options?e.options:{},this.containerProps=e.containerProps?e.containerProps:{width:"100%",position:"relative"},this.containerProps.height=e.containerProps&&e.containerProps.height?e.containerProps.height:this.options.height?this.options.height+"px":"400px",this.chartContainerId="canvasjs-react-chart-container-"+ee._cjsContainerId++}componentDidMount(){this.chart=new CanvasJS.Chart(this.chartContainerId,this.options),this.chart.render(),this.props.onRef&&this.props.onRef(this.chart)}shouldComponentUpdate(e,t){return!(e.options===this.options)}componentDidUpdate(){this.chart.options=this.props.options,this.chart.render()}componentWillUnmount(){this.chart.destroy(),this.props.onRef&&this.props.onRef(void 0)}render(){return n.a.createElement("div",{id:this.chartContainerId,style:this.containerProps})}}V=0,(z="_cjsContainerId")in(X=ee)?Object.defineProperty(X,z,{value:V,enumerable:!0,configurable:!0,writable:!0}):X[z]=V;const te={CanvasJSChart:ee,CanvasJS:CanvasJS}.CanvasJSChart;class se extends n.a.Component{render(){const e={animationEnabled:!0,title:{text:this.props.title},axisX:{title:this.props.title_X,reversed:!0},axisY:{title:this.props.title_Y,maximum:100},data:[{type:"bar",dataPoints:this.props.data}]};return n.a.createElement("div",null,n.a.createElement(te,{options:e}))}}var ae=se;class ne extends n.a.Component{constructor(e){super(e),this.state={permission:!1,questionToggle:!1,categoryToggle:!1,title:"",create_date:"",deadline:"",question_count:0,submited:0,student_answers:[],performance_category:[],performance_question:[],questionGraph:[],categoryGraph:[]},this.loadTaskResults=this.loadTaskResults.bind(this),this.questionToggle=this.questionToggle.bind(this),this.categoryToggle=this.categoryToggle.bind(this)}componentDidMount(){this.setState({permission:!0}),this.loadTaskResults()}loadTaskResults(){let e=this.props.match.params;fetch(`/api/task_results?c=${e.class}&t=${e.task}`).then(e=>{e.ok&&e.json().then(e=>{console.log(e),"Error"!==e.task&&(new Date>new Date(e.task_results.deadline)||e.task_results.force_close)?this.setState({title:e.task_results.title,create_date:e.task_results.create_date,deadline:e.task_results.deadline,submitted:e.task_results.submitted,question_count:e.task_results.question_count,student_answers:e.task_results.student_answers,performance_category:e.task_results.performance_category,performance_question:e.task_results.performance_question},()=>{let e=this.state.performance_question.map(e=>({y:Number(e.correct/this.state.question_count*100),label:e.question_num})),t=this.state.performance_category.map(e=>({y:Number(e.correct/e.category_count*100),label:e.category}));this.setState({questionGraph:e,categoryGraph:t})}):this.props.history.goBack()})})}questionToggle(){this.setState({questionToggle:!this.state.questionToggle})}categoryToggle(){this.setState({categoryToggle:!this.state.categoryToggle})}render(){return n.a.createElement("div",{className:"TaskResults content"},n.a.createElement("div",{className:"header"},n.a.createElement(l.b,{className:"header-icon",to:"/classrooms/"+this.props.match.params.class+"/tasks/"+this.props.match.params.task},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png"})),n.a.createElement("span",null,"Task Results")),this.state.permission?n.a.createElement("div",null,n.a.createElement("div",null,"Task Title: ",this.state.title),n.a.createElement("div",null,"Create Date: ",this.state.create_date),n.a.createElement("div",null,"Deadline: ",this.state.deadline),n.a.createElement("div",null,"Submitted: ",this.state.submitted),n.a.createElement("div",null,"Total Question: ",this.state.question_count),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("span",{onClick:this.questionToggle},"Correct Rate (By question)"),this.state.questionToggle?n.a.createElement("div",null,n.a.createElement(ae,{title:"Correct Rate by Question",title_X:"Questions",title_Y:"Correct Rate (%)",data:this.state.questionGraph}),this.state.performance_question.map(e=>n.a.createElement("div",null,e.question_num,": ",Number(e.correct/this.state.question_count*100).toFixed(2),"%(",e.correct,"/",this.state.question_count,")"))):null),n.a.createElement("li",null,n.a.createElement("span",{onClick:this.categoryToggle},"Correct Rate (By category)"),this.state.categoryToggle?n.a.createElement("div",null,n.a.createElement(ae,{title:"Correct Rate by Category",title_X:"Categories",title_Y:"Correct Rate (%)",data:this.state.categoryGraph}),this.state.performance_category.map(e=>n.a.createElement("div",null,e.category?e.category:"Others",": ",Number(e.correct/e.category_count*100).toFixed(2),"%(",e.correct,"/",e.category_count,")"))):null)),n.a.createElement("div",null,"Student Answers:"),n.a.createElement("ul",null,this.state.student_answers.map(e=>n.a.createElement(l.b,{to:this.props.match.url+"/"+parseInt(e.student)},n.a.createElement("li",null,n.a.createElement("div",null,"ID: ",e.student),n.a.createElement("div",null,"Name: ",e.name),n.a.createElement("div",null,"Correct Rate: ",Number(e.correct/this.state.question_count*100).toFixed(2),"%(",e.correct,"/",this.state.question_count,")")))))):n.a.createElement("div",null,"Please Wait..."))}}var ie=Object(r.g)(ne);class oe extends n.a.Component{constructor(e){super(e),this.state={permission:!1,title:"",create_date:"",deadline:"",question_count:0,student_result:null,performance_category:[],student_answers:[],categoryGraph:[]},this.loadTaskResult=this.loadTaskResult.bind(this),this.categoryToggle=this.categoryToggle.bind(this)}componentDidMount(){this.loadTaskResult()}loadTaskResult(){let e=this.props.match.params;fetch(`/api/task_result?c=${e.class}&t=${e.task}&s=${e.student}`).then(e=>{e.ok&&e.json().then(e=>{console.log(e),"Error"!==e.task&&(new Date>new Date(e.task_results.deadline)||e.task_results.force_close)?this.setState({permission:!0,title:e.task_results.title,create_date:e.task_results.create_date,deadline:e.task_results.deadline,question_count:e.task_results.question_count,performance_category:e.task_results.performance_category,student_result:e.task_results.student_result,student_answers:e.task_results.student_answers},()=>{let e=this.state.performance_category.map(e=>({y:Number(e.correct/e.category_count*100),label:e.category}));this.setState({categoryGraph:e})}):this.props.history.goBack()})})}categoryToggle(){this.setState({categoryToggle:!this.state.categoryToggle})}render(){return n.a.createElement("div",{className:"TaskResult content"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png",onClick:this.props.history.goBack}),n.a.createElement("span",null,"Task Result")),this.state.permission?n.a.createElement("div",null,n.a.createElement("div",null,"Task Title: ",this.state.title),n.a.createElement("div",null,"Create Date: ",this.state.create_date),n.a.createElement("div",null,"Deadline: ",this.state.deadline),n.a.createElement("div",null,"Total Question: ",this.state.question_count),n.a.createElement("ul",null,null!=this.state.student_result?n.a.createElement("li",{onClick:()=>this.props.userInfoToggle(this.state.student_result.student)},n.a.createElement("div",null,"Student ID: ",this.state.student_result.student),n.a.createElement("div",null,"Student Name: ",this.state.student_result.name),n.a.createElement("div",null,"Correct Rate: ",Number(this.state.student_result.correct/this.state.question_count*100).toFixed(2),"%(",this.state.student_result.correct,"/",this.state.question_count,")")):null,n.a.createElement("li",null,n.a.createElement("span",{onClick:this.categoryToggle},"Correct Rate (By category)"),this.state.categoryToggle?n.a.createElement("div",null,n.a.createElement(ae,{title:"Correct Rate by Category",title_X:"Categories",title_Y:"Correct Rate (%)",data:this.state.categoryGraph}),this.state.performance_category.map(e=>n.a.createElement("div",null,e.category?e.category:"Others",": ",Number(e.correct/e.category_count*100).toFixed(2),"%(",e.correct,"/",e.category_count,")"))):null)),n.a.createElement("br",null),n.a.createElement("div",null,"Question Result:"),this.state.student_answers.map(e=>n.a.createElement("div",null,n.a.createElement("div",null,"Question ",e.question_num,"."),n.a.createElement("div",null,n.a.createElement("pre",null,e.question)),n.a.createElement("div",null,"Your answer: ",n.a.createElement("span",{style:e.student_answer===e.answer?{color:"green"}:{color:"red"}},e.student_answer)),e.student_answer!==e.answer?n.a.createElement("div",null,"Correct answer: ",n.a.createElement("span",{style:{color:"green"}},e.answer)):null))):n.a.createElement("div",null,"Please Wait..."))}}var le=Object(r.g)(oe);const re=(e,t,s,a,i)=>{let o,r,c,h=0,m=0,d=(new Date).toLocaleDateString();return o=0===i?n.a.createElement("div",{className:"dayHead"}):d===new Date(`${t.year}/${t.month}/${i}`).toLocaleDateString()?n.a.createElement("div",{className:"dayHead today"},i):n.a.createElement("div",{className:"dayHead"},i),s.forEach(e=>{new Date(e.deadline).toLocaleDateString()===new Date(`${t.year}/${t.month}/${i}`).toLocaleDateString()&&h++}),a.forEach(e=>{new Date(e.event_date).toLocaleDateString()===new Date(`${t.year}/${t.month}/${i}`).toLocaleDateString()&&m++}),r=h>0?n.a.createElement("div",{className:"deadline"},h," Deadline"):null,c=m>0?n.a.createElement("div",{className:"event"},m," Events"):null,n.a.createElement(l.b,{className:"day",to:0!==i?`/classrooms/${e}/calendar/${t.year}_${t.month}_${i}`:null},n.a.createElement("li",null,o,n.a.createElement("div",{className:"dayDetail"},r,c)))},ce=(e,t,s,a)=>{let i=[1,3,5,7,8,10,12],o=[],l=30,r=new Date(`${t.year}/${t.month}/1`).getDay();if(2===t.month){let e=t.year;l=e%4==0&&e%100!=0||e%400==0&&e%3200!=0?29:28}else for(let e=0;e<i.length;e++)t.month===i[e]&&(l=31);let c=re.bind(null,e,t,s,a);for(let e=1;e<=r;e++)o.push(c(0));for(let e=1;e<=l;e++)o.push(c(e));return n.a.createElement("ul",{className:"days"},o)};class he extends n.a.Component{constructor(e){super(e),this.state={}}render(){let e=ce(this.props.class,this.props.date,this.props.deadline,this.props.events);return n.a.createElement("div",{className:"day-list"},e)}}class me extends n.a.Component{constructor(e){super(e),this.state={open:!1,createEventToggle:!1,deadline:[],events:[]},this.loadCalendar=this.loadCalendar.bind(this),this.createEvent=this.createEvent.bind(this),this.deleteEvent=this.deleteEvent.bind(this),this.createEventToggle=this.createEventToggle.bind(this),this.openToggle=this.openToggle.bind(this)}loadCalendar(){fetch(`/api/calendar?class=${this.props.class}&date=${this.props.date}`).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({deadline:e.calendar.deadline,events:e.calendar.events})})})}createEvent(e){e.preventDefault();let t=document.forms.form_createEvent;fetch(`/api/calendar?class=${this.props.class}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({createEvent:{name:t.event_name.value,description:t.event_description.value,date:this.props.date}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.loadCalendar(),this.props.reload(),t.event_name.value="",t.event_description.value="",this.setState({createEventToggle:!1})})})}deleteEvent(e){fetch(`/api/calendar?class=${this.props.class}&event=${e}`,{method:"DELETE"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.loadCalendar(),this.props.reload()})})}createEventToggle(){this.setState({createEventToggle:!this.state.createEventToggle})}openToggle(){this.setState({open:!this.state.open})}render(){return n.a.createElement("div",{className:this.state.open?"Day content open":"Day content close"},n.a.createElement("div",{className:"header"},n.a.createElement(l.b,{className:"header-icon",to:`/classrooms/${this.props.class}/calendar`},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png"})),n.a.createElement("span",null,"Day")),n.a.createElement("div",{className:"dayPannel"},n.a.createElement("span",null,this.props.date?this.props.date.replace("_","-").replace("_","-"):null),n.a.createElement("span",null),"teacher"===this.props.user_type?n.a.createElement("img",{src:"https://img.icons8.com/flat_round/64/000000/plus.png",onClick:this.createEventToggle}):null),this.state.createEventToggle&&"teacher"===this.props.user_type?n.a.createElement("div",null,n.a.createElement("div",{style:{textAlign:"center"}},"New Event"),n.a.createElement("form",{name:"form_createEvent",onSubmit:this.createEvent,style:{paddingBottom:".5vh"}},n.a.createElement("input",{type:"text",name:"event_name",placeholder:"Name of the Event",required:!0}),n.a.createElement("textarea",{name:"event_description",placeholder:"Desceibe the Event here...",required:!0}),n.a.createElement("input",{type:"submit"}))):null,n.a.createElement("ul",null,n.a.createElement("li",{style:{textAlign:"center"}},"Deadline Today"),this.state.deadline.map((e,t)=>n.a.createElement(l.b,{to:`/classrooms/${e.classroom}/tasks/${e.task_num}`},n.a.createElement("li",{className:"deadline-item"},n.a.createElement("span",null,t+1),n.a.createElement("span",null,e.title," (Task number: ",e.task_num,")")))),n.a.createElement("li",{style:{textAlign:"center"}},"Events Today"),this.state.events.map((e,t)=>n.a.createElement("li",{className:"event-item"},n.a.createElement("div",null,n.a.createElement("span",null,t+1),n.a.createElement("span",null,e.event),"teacher"===this.props.user_type?n.a.createElement("img",{src:"https://img.icons8.com/flat_round/64/000000/minus.png",onClick:()=>this.deleteEvent(e.event_num)}):null),n.a.createElement("div",null,e.detail)))))}}const de="https://img.icons8.com/flat_round/64/000000/back--v1.png";class ue extends n.a.Component{constructor(){super(),this.state={date:{year:2e3,month:1},deadline:[],events:[]},this.child=n.a.createRef(),this.loadCalendar=this.loadCalendar.bind(this),this.loadDate=this.loadDate.bind(this),this.createMonthList=this.createMonthList.bind(this),this.changeMonth=this.changeMonth.bind(this),this.openChild=this.openChild.bind(this)}componentDidMount(){this.createMonthList(),this.loadCalendar(),this.loadDate()}componentDidUpdate(e){e.match!==this.props.match&&(this.loadDate(),"/classrooms/:class/calendar/:date"===e.match.path&&"/classrooms/:class/calendar"===this.props.match.path&&this.child.current&&this.child.current.openToggle())}loadCalendar(){fetch(`/api/calendar?class=${this.props.match.params.class}`).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({deadline:e.calendar.deadline,events:e.calendar.events})})})}loadDate(){"/classrooms/:class/calendar/:date"===this.props.match.path&&this.child.current&&(this.child.current.loadCalendar(),this.child.current.openToggle())}createMonthList(){let e=(new Date).toLocaleDateString(),t={year:parseInt(e.split("/")[2]),month:parseInt(e.split("/")[1])};this.setState({date:t})}changeMonth(e){let t=this.state.date;t=t.month+e<1?{year:t.year-1,month:t.month+12+e}:t.month+e>12?{year:t.year+1,month:t.month-12+e}:{year:t.year,month:t.month+e},this.setState({date:t})}openChild(){this.child.current.openToggle()}render(){return n.a.createElement("div",{className:"/classrooms/:class/calendar"===this.props.match.path?"Calendar conetent":"Calendar conetent hide"},n.a.createElement("div",{className:"header",style:{gridArea:"header"}},n.a.createElement(l.b,{className:"header-icon",to:"/classrooms/"+this.props.match.params.class},n.a.createElement("img",{className:"header-icon",src:de})),n.a.createElement("span",{onClick:this.openChild},"Calendar")),n.a.createElement("div",{className:"month"},n.a.createElement("img",{src:de,className:"left",onClick:()=>this.changeMonth(-1)}),n.a.createElement("span",{className:"middle"},this.state.date.year,"-",this.state.date.month),n.a.createElement("img",{src:de,className:"right",onClick:()=>this.changeMonth(1)})),n.a.createElement("ul",{className:"weeks"},n.a.createElement("li",{className:"week sunday"},"Sun"),n.a.createElement("li",{className:"week"},"Mon"),n.a.createElement("li",{className:"week"},"Tue"),n.a.createElement("li",{className:"week"},"Wed"),n.a.createElement("li",{className:"week"},"Thu"),n.a.createElement("li",{className:"week"},"Fri"),n.a.createElement("li",{className:"week"},"Sat")),n.a.createElement(he,{deadline:this.state.deadline,events:this.state.events,date:this.state.date,class:this.props.match.params.class}),n.a.createElement(me,{reload:this.loadCalendar,ref:this.child,date:this.props.match.params.date?this.props.match.params.date:"",user_type:this.props.user_type,class:this.props.match.params.class}))}}var pe=Object(r.g)(ue);class ge extends n.a.Component{constructor(e){super(e),this.state={messages:[],input:"",socket:""},this.loadMessage=this.loadMessage.bind(this),this.inputOnChange=this.inputOnChange.bind(this),this.inputKeyDown=this.inputKeyDown.bind(this),this.sendMessage=this.sendMessage.bind(this),this.leaveRoom=this.leaveRoom.bind(this)}componentDidMount(){this.loadMessage();let e=io.connect(window.location.origin),t=this.props.match.params.class;this.setState({socket:e}),e.on("connect",()=>{e.emit("addRoom",{room:`class${t}`})});let s=this.loadMessage;e.on("reloadMessage",e=>{console.log(e),s()})}loadMessage(){fetch(`/api/chatroom?class=${this.props.match.params.class}`).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({messages:e.chatroom.messages})})})}inputOnChange(e){this.setState({input:e.target.value})}inputKeyDown(e){"Enter"===e.key&&this.sendMessage()}sendMessage(){console.log(this.state.input),""!=this.state.input?fetch(`/api/chatroom?class=${this.props.match.params.class}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:this.state.input})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e)})}):alert("Please fill in at least one word.")}leaveRoom(){this.state.socket.emit("leaveRoom",{room:`class${this.props.match.params.class}`})}render(){return n.a.createElement("div",{className:"Chatroom content"},n.a.createElement("div",{className:"header"},n.a.createElement(l.b,{className:"header-icon",to:`/classrooms/${this.props.match.params.class}`,onClick:this.leaveRoom},n.a.createElement("img",{className:"header-icon",src:"https://img.icons8.com/flat_round/64/000000/back--v1.png"})),n.a.createElement("span",null,"Chatroom")),n.a.createElement("ul",null,this.state.messages.map(e=>n.a.createElement("li",{onClick:()=>this.props.userInfoToggle(e.member)},n.a.createElement("div",null,e.nickname," Date:",e.date?new Date(e.date).toISOString().split("T")[0]:null," ",e.date?new Date(e.date).toISOString().split("T")[1].split(".")[0]:null),n.a.createElement("div",null,e.message)))),n.a.createElement("div",null,n.a.createElement("input",{type:"text",value:this.state.input,onKeyDown:this.inputKeyDown,onChange:this.inputOnChange}),n.a.createElement("button",{onClick:this.sendMessage},"Send")))}}var Ee=Object(r.g)(ge);class _e extends n.a.Component{constructor(e){super(e),this.state={createToggle:!1,classrooms:[],part:""},this.loadClassrooms=this.loadClassrooms.bind(this),this.createToggle=this.createToggle.bind(this),this.createClassroom=this.createClassroom.bind(this)}componentDidMount(){this.loadClassrooms()}componentDidUpdate(e){e.match!==this.props.match&&(console.log(this.props),"/classrooms/:class/members"===this.props.match.path?this.setState({part:"classMembers"}):"/classrooms/:class/create_task"===this.props.match.path?this.setState({part:"createTask"}):"/classrooms/:class/tasks"===this.props.match.path?this.setState({part:"tasks"}):"/classrooms/:class/tasks/:task"===this.props.match.path?this.setState({part:"task"}):"/classrooms/:class/tasks/:task/edit"===this.props.match.path&&"teacher"===this.props.user_type?this.setState({part:"editTask"}):"/classrooms/:class/tasks/:task/results"===this.props.match.path&&"teacher"===this.props.user_type?this.setState({part:"results"}):"/classrooms/:class/tasks/:task/results/:student"===this.props.match.path?this.setState({part:"result"}):"/classrooms/:class/tasks/:task/answer"===this.props.match.path&&"student"===this.props.user_type?this.setState({part:"answerTask"}):"/classrooms/:class/tasks/:task/edit_answer/:student"===this.props.match.path&&"student"===this.props.user_type?this.setState({part:"editAnswer"}):"/classrooms/:class/calendar"===this.props.match.path?this.setState({part:"calendar"}):"/classrooms/:class/calendar/:date"===this.props.match.path?this.setState({part:"date"}):"/classrooms/:class/chat"===this.props.match.path?this.setState({part:"chat"}):"/classrooms/:class"===this.props.match.path?this.setState({part:"class"}):this.setState({part:""}))}loadClassrooms(){fetch("/api/classrooms").then(e=>{e.ok&&e.json().then(e=>{this.setState({classrooms:e.classrooms})})})}createToggle(){this.setState({createToggle:!this.state.createToggle})}createClassroom(e){e.preventDefault();let t=document.forms.form_createClassroom;""!==t.classroom_name.value?fetch("/api/classroom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({createClassroom:{name:t.classroom_name.value,description:t.classroom_description.value}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),t.classroom_name.value="",t.classroom_description.value="",this.loadClassrooms(),this.createToggle()})}):alert("Please at least fill in the name of the classroom.")}render(){return n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"Classrooms"},"teacher"===this.props.user_type?n.a.createElement("div",null,n.a.createElement("button",{onClick:this.createToggle},"Create Classrooms"),this.state.createToggle?n.a.createElement("form",{name:"form_createClassroom"},n.a.createElement("input",{type:"text",name:"classroom_name",placeholder:"Name of the Classroom",required:!0}),n.a.createElement("textarea",{name:"classroom_description",placeholder:"Desceibe the Classroom here...",required:!0}),n.a.createElement("input",{type:"submit",onClick:this.createClassroom})):null):null,n.a.createElement("h3",null,"My Classrooms"),n.a.createElement("ul",null,this.state.classrooms.map(e=>n.a.createElement(l.b,{to:"/classrooms/"+e.classroom_id},n.a.createElement("li",null,n.a.createElement("div",null,e.name),n.a.createElement("div",null,e.description),n.a.createElement("div",null,e.create_date))))),n.a.createElement("div",{style:{textAlign:"center"}},"--- Bottom ---")),""!==this.state.part?n.a.createElement("div",{className:"coverboard"}):null,"class"===this.state.part?n.a.createElement(O,{user_type:this.props.user_type,reload:this.loadClassrooms,userInfoToggle:this.props.userInfoToggle}):null,"classMembers"===this.state.part?n.a.createElement(Q,{user_type:this.props.user_type,userInfoToggle:this.props.userInfoToggle}):null,"createTask"===this.state.part?n.a.createElement(F,null):null,"tasks"===this.state.part?n.a.createElement(A,{user_id:this.props.user_id}):null,"task"===this.state.part?n.a.createElement(j,{user_id:this.props.user_id,user_type:this.props.user_type,userInfoToggle:this.props.userInfoToggle}):null,"editTask"===this.state.part&&"teacher"===this.props.user_type?n.a.createElement(K,null):null,"answerTask"===this.state.part&&"student"===this.props.user_type?n.a.createElement(W,null):null,"editAnswer"===this.state.part&&"student"===this.props.user_type?n.a.createElement(Z,null):null,"results"===this.state.part&&"teacher"===this.props.user_type?n.a.createElement(ie,null):null,"result"===this.state.part?n.a.createElement(le,{userInfoToggle:this.props.userInfoToggle}):null,"calendar"===this.state.part||"date"===this.state.part?n.a.createElement(pe,{user_type:this.props.user_type}):null,"chat"===this.state.part?n.a.createElement(Ee,{user_id:this.props.user_id,userInfoToggle:this.props.userInfoToggle}):null)}}var Ce=Object(r.g)(_e);class ke extends n.a.Component{constructor(e){super(e),this.state={notice:[]},this.loadNotice=this.loadNotice.bind(this),this.collectionToggle=this.collectionToggle.bind(this)}componentDidMount(){this.loadNotice()}loadNotice(){fetch("/api/notification").then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({notice:e.notification})})})}collectionToggle(e,t){fetch("/api/course_collection?c="+e,{method:t}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.loadNotice()})})}render(){return n.a.createElement("ul",{className:"Notification content"},this.state.notice.map(e=>n.a.createElement("li",null,n.a.createElement("div",null,e.nickname," create a new Course:"),n.a.createElement("div",null,e.title),e.collection?n.a.createElement("div",{onClick:()=>this.collectionToggle(e.course_id,"DELETE")},"Remove from Collection"):n.a.createElement("div",{onClick:()=>this.collectionToggle(e.course_id,"POST")},"Add to Collection"))))}}class ve extends n.a.Component{constructor(e){super(e),this.state={icon:`${window.location.origin}/static/images/icons/icon-128x128.png`,info:!1,iconChange:!1,nicknameChange:!1,passwordChange:!1},this.loadInfo=this.loadInfo.bind(this),this.loadIcon=this.loadIcon.bind(this),this.changeIcon=this.changeIcon.bind(this),this.deleteIcon=this.deleteIcon.bind(this),this.changeNickname=this.changeNickname.bind(this),this.changePassword=this.changePassword.bind(this),this.imgOnError=this.imgOnError.bind(this),this.iconToggle=this.iconToggle.bind(this),this.nicknameToggle=this.nicknameToggle.bind(this),this.passwordToggle=this.passwordToggle.bind(this)}componentDidMount(){this.loadInfo(),this.loadIcon()}loadInfo(){fetch("/api/user_info").then(e=>{e.ok&&e.json().then(e=>{console.log(e),this.setState({info:e.user_info})})})}loadIcon(e){this.setState({icon:`${window.location.origin}/static/images/user_icons/${this.props.user_data.user_id}.png?${(new Date).getTime()}`})}changeIcon(e){e.preventDefault();let t=document.forms.form_changeIcon,s=t.icon.files[0],a=null;if(null!=s&&(a=s.name.split(".").pop()),console.log(s),"png"===a){const e=new FormData;e.append("icon",s),fetch("/api/user_info",{method:"POST",body:e}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),t.icon.value="",this.iconToggle(),this.loadIcon()})})}else null===a?alert("Please Choose the file before submit"):alert("Sorry, we only support .png file for Icon")}deleteIcon(){fetch("/api/user_info",{method:"DELETE"}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),form.icon.value="",this.iconToggle(),this.loadIcon()})})}changeNickname(e){e.preventDefault();let t=document.forms.form_changeNickname;fetch("/api/user_data",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({changeNickname:{nickname:t.nickname.value}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),t.nickname.value="",this.nicknameToggle(),this.props.reload(),alert("Success! Nickname Changed")})})}changePassword(e){e.preventDefault();let t=document.forms.form_changePassword;t.password_new.value===t.password_repeat.value?fetch("/api/user_data",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({changePassword:{password_now:t.password_now.value,password_new:t.password_new.value}})}).then(e=>{e.ok&&e.json().then(e=>{console.log(e),"Error"!==e.changePassword?(this.passwordToggle(),t.password_now.value="",t.password_new.value="",t.password_repeat.value="",alert("Success! Password Changed")):alert("Error! Please Check Your Password Is Correct Or Not")})}):alert("Error! Please Check Your Two New Password Are Same Or Not")}imgOnError(){this.setState({icon:`${window.location.origin}/static/images/icons/icon-128x128.png`})}iconToggle(){this.setState({iconChange:!this.state.iconChange})}nicknameToggle(){this.setState({nicknameChange:!this.state.nicknameChange})}passwordToggle(){this.setState({passwordChange:!this.state.passwordChange})}render(){let e=this.props.user_data;return n.a.createElement("div",{className:"Setting content"},n.a.createElement("img",{src:this.state.icon,alt:"user icon",onError:this.imgOnError}),n.a.createElement("div",null,e.nickname),"f"===e.sex?n.a.createElement("div",{style:{color:"deeppink"}},"Female"):n.a.createElement("div",{style:{color:"lightblue"}},"Male"),n.a.createElement("div",null,e.user_id),n.a.createElement("div",null,e.name),n.a.createElement("div",null,e.user_type," from ",e.school),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("div",null,"Best Answer"),n.a.createElement("div",null,this.state.info?this.state.info.best_answer?this.state.info.best_answer:0:null)),n.a.createElement("div",null,n.a.createElement("div",null,"Answer Likes"),n.a.createElement("div",null,this.state.info?this.state.info.answer_likes?this.state.info.answer_likes:0:null)),"teacher"===e.user_type&&n.a.createElement("div",null,n.a.createElement("div",null,"Course Average Rate"),n.a.createElement("div",null,this.state.info?this.state.info.course_num?this.state.info.course_num:0:null)),"teacher"===e.user_type&&n.a.createElement("div",null,n.a.createElement("div",null,"Followers"),n.a.createElement("div",null,this.state.info?this.state.info.follower?this.state.info.follower:0:null))),n.a.createElement("ul",null,n.a.createElement("li",{onClick:this.iconToggle},"Change Icon"),this.state.iconChange&&n.a.createElement("li",null,n.a.createElement("form",{name:"form_changeIcon",onSubmit:this.changeIcon},n.a.createElement("input",{name:"icon",type:"file"}),n.a.createElement("input",{type:"submit"})),n.a.createElement("div",{onClick:this.deleteIcon},"Just delete my icon!")),n.a.createElement("li",{onClick:this.nicknameToggle},"Change Nickname"),this.state.nicknameChange&&n.a.createElement("li",null,n.a.createElement("form",{name:"form_changeNickname",onSubmit:this.changeNickname},n.a.createElement("input",{name:"nickname",type:"text"}),n.a.createElement("input",{type:"submit"}))),n.a.createElement("li",{onClick:this.passwordToggle},"Change Password"),this.state.passwordChange&&n.a.createElement("li",null,n.a.createElement("form",{name:"form_changePassword",onSubmit:this.changePassword},n.a.createElement("input",{name:"password_now",type:"password"}),n.a.createElement("input",{name:"password_new",type:"password"}),n.a.createElement("input",{name:"password_repeat",type:"password"}),n.a.createElement("input",{type:"submit"})))))}}const be="https://img.icons8.com/flat_round/64/000000/back--v1.png";class ye extends n.a.Component{constructor(e){super(e),this.state={nav:!1,userInfo:!1,user_data:{}},this.child=n.a.createRef(),this.navToggle=this.navToggle.bind(this),this.loadUser=this.loadUser.bind(this),this.userInfoToggle=this.userInfoToggle.bind(this)}componentDidMount(){this.loadUser()}navToggle(){this.setState({nav:!this.state.nav},()=>console.log(this.state))}loadUser(){fetch("/api/user_data").then(e=>{e.ok&&e.json().then(e=>{this.setState({user_data:e.user_data},()=>console.log(this.state.user_data))})})}userInfoToggle(e){this.state.userInfo?this.setState({userInfo:!1}):this.setState({userInfo:!0},()=>{this.child.current.loadUserInfo(e)})}render(){let e=window.location.origin+"/static/images/",t=t=>n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:e+"icons/icon-192x192.png"}),n.a.createElement("span",null,t.title),n.a.createElement("img",{className:"header-toggle",src:e+"toggle.png",onClick:this.navToggle}));return n.a.createElement("div",{id:"Student"},n.a.createElement(l.a,null,n.a.createElement("div",{id:"main"},n.a.createElement(c,{nav:this.state.nav,navToggle:this.navToggle}),this.state.userInfo?n.a.createElement(h,{ref:this.child,user_id:this.state.user_data.user_id,openToggle:this.userInfoToggle}):null,n.a.createElement(r.d,null,n.a.createElement(r.b,{path:"/courses/collection"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:be,onClick:()=>window.history.back()}),n.a.createElement("span",null,"My Collection")),n.a.createElement(y,{userInfoToggle:this.userInfoToggle})),"teacher"===this.state.user_data.user_type?n.a.createElement(r.b,{path:"/courses/my"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:be,onClick:()=>window.history.back()}),n.a.createElement("span",null,"My Courses")),n.a.createElement(b,{userInfoToggle:this.userInfoToggle})):null,"teacher"===this.state.user_data.user_type?n.a.createElement(r.b,{path:"/courses/create"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:be,onClick:()=>window.history.back()}),n.a.createElement("span",null,"Create Courses")),n.a.createElement(v,null)):null,n.a.createElement(r.b,{path:"/courses"},n.a.createElement(t,{title:"Courses"}),n.a.createElement(k,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/questions/my"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:be,onClick:()=>window.history.back()}),n.a.createElement("span",null,"My Questions")),n.a.createElement(N,{userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/questions/collection"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:be,onClick:()=>window.history.back()}),n.a.createElement("span",null,"My Collection")),n.a.createElement(q,{userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/questions/create"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{className:"header-icon",src:be,onClick:()=>window.history.back()}),n.a.createElement("span",null,"Create Questions")),n.a.createElement(S,null)),n.a.createElement(r.b,{path:"/questions"},n.a.createElement(t,{title:"Questions"}),n.a.createElement(T,{user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/classrooms/:class/chat"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/classrooms/:class/calendar/:date"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/classrooms/:class/calendar"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),"teacher"===this.state.user_data.user_type?n.a.createElement(r.b,{path:"/classrooms/:class/create_task"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})):null,"teacher"===this.state.user_data.user_type?n.a.createElement(r.b,{path:"/classrooms/:class/tasks/:task/edit"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})):null,n.a.createElement(r.b,{path:"/classrooms/:class/tasks/:task/results/:student"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),"teacher"===this.state.user_data.user_type?n.a.createElement(r.b,{path:"/classrooms/:class/tasks/:task/results"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})):null,"student"===this.state.user_data.user_type?n.a.createElement(r.b,{path:"/classrooms/:class/tasks/:task/edit_answer/:student"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})):null,"student"===this.state.user_data.user_type?n.a.createElement(r.b,{path:"/classrooms/:class/tasks/:task/answer"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})):null,n.a.createElement(r.b,{path:"/classrooms/:class/tasks/:task"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/classrooms/:class/tasks"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/classrooms/:class/members"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/classrooms/:class"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/classrooms"},n.a.createElement(t,{title:"Classrooms"}),n.a.createElement(Ce,{user_type:this.state.user_data.user_type,user_id:this.state.user_data.user_id,userInfoToggle:this.userInfoToggle})),n.a.createElement(r.b,{path:"/notification"},n.a.createElement(t,{title:"Notification"}),n.a.createElement(ke,null)),n.a.createElement(r.b,{path:"/setting"},n.a.createElement(t,{title:"Setting"}),n.a.createElement(ve,{user_data:this.state.user_data,reload:this.loadUser})),n.a.createElement(r.a,{from:"/",to:"/courses"})))))}}o.a.render(n.a.createElement(ye,null),document.querySelector("#node"))}});
//# sourceMappingURL=student.js.map